<!DOCTYPE html>
<!-- saved from url=(0077)http://guides.rubyonrails.org/layouts_and_rendering.html#using-nested-layouts -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Layouts and Rendering in Rails — Ruby on Rails Guides</title>
<link rel="stylesheet" type="text/css" href="./Layouts and Rendering in Rails — Ruby on Rails Guides_files/style.css">
<link rel="stylesheet" type="text/css" href="./Layouts and Rendering in Rails — Ruby on Rails Guides_files/print.css" media="print">

<link rel="stylesheet" type="text/css" href="./Layouts and Rendering in Rails — Ruby on Rails Guides_files/shCore.css">
<link rel="stylesheet" type="text/css" href="./Layouts and Rendering in Rails — Ruby on Rails Guides_files/shThemeRailsGuides.css">

<link rel="stylesheet" type="text/css" href="./Layouts and Rendering in Rails — Ruby on Rails Guides_files/fixes.css">

<link href="http://guides.rubyonrails.org/images/favicon.ico" rel="shortcut icon" type="image/x-icon">
<style id="dark-reader-style" type="text/css">@media screen {

/* Leading rule */
html {
  -webkit-filter: invert(100%) hue-rotate(180deg) brightness(90%) contrast(80%) !important;
}

/* Contrary rule */
img, iframe, video, *:not(object):not(body)>embed, object,
svg image,
*[style*="background:url"]:empty, *[style*="background-image:url"]:empty,
*[style*="background: url"]:empty, *[style*="background-image: url"]:empty {
  -webkit-filter: invert(100%) hue-rotate(180deg) !important;
}

/* Text contrast */
html {
  text-shadow: 0 0 0 !important;
}

/* Full screen */
*:-webkit-full-screen, *:-webkit-full-screen * {
  -webkit-filter: none !important;
}

/* Page background */
html {
  background: rgb(25,25,25) !important;
}

}</style></head>
<body class="guide" data-feedly-mini="yes">
  <div id="topNav">
    <div class="wrapper">
      <strong class="more-info-label">More at <a href="http://rubyonrails.org/">rubyonrails.org:</a> </strong>
      <span class="red-button more-info-button">
        More Ruby on Rails
      </span>
      <ul class="more-info-links s-hidden">
        <li class="more-info"><a href="http://weblog.rubyonrails.org/">Blog</a></li>
        <li class="more-info"><a href="http://guides.rubyonrails.org/">Guides</a></li>
        <li class="more-info"><a href="http://api.rubyonrails.org/">API</a></li>
        <li class="more-info"><a href="http://stackoverflow.com/questions/tagged/ruby-on-rails">Ask for help</a></li>
        <li class="more-info"><a href="https://github.com/rails/rails">Contribute on GitHub</a></li>
      </ul>
    </div>
  </div>
  <div id="header">
    <div class="wrapper clearfix">
      <h1><a href="http://guides.rubyonrails.org/index.html" title="Return to home page">Guides.rubyonrails.org</a></h1>
      <ul class="nav">
        <li><a class="nav-item" href="http://guides.rubyonrails.org/index.html">Home</a></li>
        <li class="guides-index guides-index-large">
          <a href="http://guides.rubyonrails.org/index.html" id="guidesMenu" class="guides-index-item nav-item">Guides Index</a>
          <div id="guides" class="clearfix" style="display: none;">
            <hr>
              <dl class="L">
                <dt>Start Here</dt>
                <dd><a href="http://guides.rubyonrails.org/getting_started.html">Getting Started with Rails</a></dd>
                <dt>Models</dt>
                <dd><a href="http://guides.rubyonrails.org/active_record_basics.html">Active Record Basics</a></dd>
                <dd><a href="http://guides.rubyonrails.org/active_record_migrations.html">Active Record Migrations</a></dd>
                <dd><a href="http://guides.rubyonrails.org/active_record_validations.html">Active Record Validations</a></dd>
                <dd><a href="http://guides.rubyonrails.org/active_record_callbacks.html">Active Record Callbacks</a></dd>
                <dd><a href="http://guides.rubyonrails.org/association_basics.html">Active Record Associations</a></dd>
                <dd><a href="http://guides.rubyonrails.org/active_record_querying.html">Active Record Query Interface</a></dd>
                <dt>Views</dt>
                <dd><a href="http://guides.rubyonrails.org/layouts_and_rendering.html">Layouts and Rendering in Rails</a></dd>
                <dd><a href="http://guides.rubyonrails.org/form_helpers.html">Action View Form Helpers</a></dd>
                <dt>Controllers</dt>
                <dd><a href="http://guides.rubyonrails.org/action_controller_overview.html">Action Controller Overview</a></dd>
                <dd><a href="http://guides.rubyonrails.org/routing.html">Rails Routing from the Outside In</a></dd>
              </dl>
              <dl class="R">
                <dt>Digging Deeper</dt>
                <dd><a href="http://guides.rubyonrails.org/active_support_core_extensions.html">Active Support Core Extensions</a></dd>
                <dd><a href="http://guides.rubyonrails.org/i18n.html">Rails Internationalization API</a></dd>
                <dd><a href="http://guides.rubyonrails.org/action_mailer_basics.html">Action Mailer Basics</a></dd>
                <dd><a href="http://guides.rubyonrails.org/active_job_basics.html">Active Job Basics</a></dd>
                <dd><a href="http://guides.rubyonrails.org/testing.html">Testing Rails Applications</a></dd>
                <dd><a href="http://guides.rubyonrails.org/security.html">Securing Rails Applications</a></dd>
                <dd><a href="http://guides.rubyonrails.org/debugging_rails_applications.html">Debugging Rails Applications</a></dd>
                <dd><a href="http://guides.rubyonrails.org/configuring.html">Configuring Rails Applications</a></dd>
                <dd><a href="http://guides.rubyonrails.org/command_line.html">The Rails Command Line</a></dd>
                <dd><a href="http://guides.rubyonrails.org/asset_pipeline.html">Asset Pipeline</a></dd>
                <dd><a href="http://guides.rubyonrails.org/working_with_javascript_in_rails.html">Working with JavaScript in Rails</a></dd>
                <dd><a href="http://guides.rubyonrails.org/autoloading_and_reloading_constants.html">Autoloading and Reloading Constants</a></dd>
                <dd><a href="http://guides.rubyonrails.org/caching_with_rails.html">Caching with Rails: An Overview</a></dd>
                <dd><a href="http://guides.rubyonrails.org/api_app.html">Using Rails for API-only Applications</a></dd>
                <dd><a href="http://guides.rubyonrails.org/action_cable_overview.html">Action Cable Overview</a></dd>
                <dt>Extending Rails</dt>
                <dd><a href="http://guides.rubyonrails.org/rails_on_rack.html">Rails on Rack</a></dd>
                <dd><a href="http://guides.rubyonrails.org/generators.html">Creating and Customizing Rails Generators</a></dd>
                <dt>Contributing to Ruby on Rails</dt>
                <dd><a href="http://guides.rubyonrails.org/contributing_to_ruby_on_rails.html">Contributing to Ruby on Rails</a></dd>
                <dd><a href="http://guides.rubyonrails.org/api_documentation_guidelines.html">API Documentation Guidelines</a></dd>
                <dd><a href="http://guides.rubyonrails.org/ruby_on_rails_guides_guidelines.html">Ruby on Rails Guides Guidelines</a></dd>
                <dt>Maintenance Policy</dt>
                <dd><a href="http://guides.rubyonrails.org/maintenance_policy.html">Maintenance Policy</a></dd>
                <dt>Release Notes</dt>
                <dd><a href="http://guides.rubyonrails.org/upgrading_ruby_on_rails.html">Upgrading Ruby on Rails</a></dd>
                <dd><a href="http://guides.rubyonrails.org/5_0_release_notes.html">Ruby on Rails 5.0 Release Notes</a></dd>
                <dd><a href="http://guides.rubyonrails.org/4_2_release_notes.html">Ruby on Rails 4.2 Release Notes</a></dd>
                <dd><a href="http://guides.rubyonrails.org/4_1_release_notes.html">Ruby on Rails 4.1 Release Notes</a></dd>
                <dd><a href="http://guides.rubyonrails.org/4_0_release_notes.html">Ruby on Rails 4.0 Release Notes</a></dd>
                <dd><a href="http://guides.rubyonrails.org/3_2_release_notes.html">Ruby on Rails 3.2 Release Notes</a></dd>
                <dd><a href="http://guides.rubyonrails.org/3_1_release_notes.html">Ruby on Rails 3.1 Release Notes</a></dd>
                <dd><a href="http://guides.rubyonrails.org/3_0_release_notes.html">Ruby on Rails 3.0 Release Notes</a></dd>
                <dd><a href="http://guides.rubyonrails.org/2_3_release_notes.html">Ruby on Rails 2.3 Release Notes</a></dd>
                <dd><a href="http://guides.rubyonrails.org/2_2_release_notes.html">Ruby on Rails 2.2 Release Notes</a></dd>
              </dl>
          </div>
        </li>
        <li><a class="nav-item" href="http://guides.rubyonrails.org/contributing_to_ruby_on_rails.html">Contribute</a></li>
        <li><a class="nav-item" href="http://guides.rubyonrails.org/credits.html">Credits</a></li>
        <li class="guides-index guides-index-small">
          <select class="guides-index-item nav-item">
            <option value="index.html">Guides Index</option>
              <optgroup label="Start Here">
                  <option value="getting_started.html">Getting Started with Rails</option>
              </optgroup>
              <optgroup label="Models">
                  <option value="active_record_basics.html">Active Record Basics</option>
                  <option value="active_record_migrations.html">Active Record Migrations</option>
                  <option value="active_record_validations.html">Active Record Validations</option>
                  <option value="active_record_callbacks.html">Active Record Callbacks</option>
                  <option value="association_basics.html">Active Record Associations</option>
                  <option value="active_record_querying.html">Active Record Query Interface</option>
              </optgroup>
              <optgroup label="Views">
                  <option value="layouts_and_rendering.html">Layouts and Rendering in Rails</option>
                  <option value="form_helpers.html">Action View Form Helpers</option>
              </optgroup>
              <optgroup label="Controllers">
                  <option value="action_controller_overview.html">Action Controller Overview</option>
                  <option value="routing.html">Rails Routing from the Outside In</option>
              </optgroup>
              <optgroup label="Digging Deeper">
                  <option value="active_support_core_extensions.html">Active Support Core Extensions</option>
                  <option value="i18n.html">Rails Internationalization API</option>
                  <option value="action_mailer_basics.html">Action Mailer Basics</option>
                  <option value="active_job_basics.html">Active Job Basics</option>
                  <option value="testing.html">Testing Rails Applications</option>
                  <option value="security.html">Securing Rails Applications</option>
                  <option value="debugging_rails_applications.html">Debugging Rails Applications</option>
                  <option value="configuring.html">Configuring Rails Applications</option>
                  <option value="command_line.html">The Rails Command Line</option>
                  <option value="asset_pipeline.html">Asset Pipeline</option>
                  <option value="working_with_javascript_in_rails.html">Working with JavaScript in Rails</option>
                  <option value="autoloading_and_reloading_constants.html">Autoloading and Reloading Constants</option>
                  <option value="caching_with_rails.html">Caching with Rails: An Overview</option>
                  <option value="api_app.html">Using Rails for API-only Applications</option>
                  <option value="action_cable_overview.html">Action Cable Overview</option>
              </optgroup>
              <optgroup label="Extending Rails">
                  <option value="rails_on_rack.html">Rails on Rack</option>
                  <option value="generators.html">Creating and Customizing Rails Generators</option>
              </optgroup>
              <optgroup label="Contributing to Ruby on Rails">
                  <option value="contributing_to_ruby_on_rails.html">Contributing to Ruby on Rails</option>
                  <option value="api_documentation_guidelines.html">API Documentation Guidelines</option>
                  <option value="ruby_on_rails_guides_guidelines.html">Ruby on Rails Guides Guidelines</option>
              </optgroup>
              <optgroup label="Maintenance Policy">
                  <option value="maintenance_policy.html">Maintenance Policy</option>
              </optgroup>
              <optgroup label="Release Notes">
                  <option value="upgrading_ruby_on_rails.html">Upgrading Ruby on Rails</option>
                  <option value="5_0_release_notes.html">Ruby on Rails 5.0 Release Notes</option>
                  <option value="4_2_release_notes.html">Ruby on Rails 4.2 Release Notes</option>
                  <option value="4_1_release_notes.html">Ruby on Rails 4.1 Release Notes</option>
                  <option value="4_0_release_notes.html">Ruby on Rails 4.0 Release Notes</option>
                  <option value="3_2_release_notes.html">Ruby on Rails 3.2 Release Notes</option>
                  <option value="3_1_release_notes.html">Ruby on Rails 3.1 Release Notes</option>
                  <option value="3_0_release_notes.html">Ruby on Rails 3.0 Release Notes</option>
                  <option value="2_3_release_notes.html">Ruby on Rails 2.3 Release Notes</option>
                  <option value="2_2_release_notes.html">Ruby on Rails 2.2 Release Notes</option>
              </optgroup>
          </select>
        </li>
      </ul>
    </div>
  </div>
  <hr class="hide">

  <div id="feature">
    <div class="wrapper">
      <h2>Layouts and Rendering in Rails</h2><p>This guide covers the basic layout features of Action Controller and Action View.</p><p>After reading this guide, you will know:</p>
<ul>
<li>How to use the various rendering methods built into Rails.</li>
<li>How to create layouts with multiple content sections.</li>
<li>How to use partials to DRY up your views.</li>
<li>How to use nested layouts (sub-templates).</li>
</ul>


                <div id="subCol">
            <h3 class="chapter"><img src="./Layouts and Rendering in Rails — Ruby on Rails Guides_files/chapters_icon.gif" alt="">Chapters</h3>
            <ol class="chapters">
<li><a href="http://guides.rubyonrails.org/layouts_and_rendering.html#overview-how-the-pieces-fit-together">Overview: How the Pieces Fit Together</a></li>
<li>
<a href="http://guides.rubyonrails.org/layouts_and_rendering.html#creating-responses">Creating Responses</a>

<ul>
<li><a href="http://guides.rubyonrails.org/layouts_and_rendering.html#rendering-by-default-convention-over-configuration-in-action">Rendering by Default: Convention Over Configuration in Action</a></li>
<li><a href="http://guides.rubyonrails.org/layouts_and_rendering.html#using-render">Using <code>render</code></a></li>
<li><a href="http://guides.rubyonrails.org/layouts_and_rendering.html#using-redirect-to">Using <code>redirect_to</code></a></li>
<li><a href="http://guides.rubyonrails.org/layouts_and_rendering.html#using-head-to-build-header-only-responses">Using <code>head</code> To Build Header-Only Responses</a></li>
</ul>
</li>
<li>
<a href="http://guides.rubyonrails.org/layouts_and_rendering.html#structuring-layouts">Structuring Layouts</a>

<ul>
<li><a href="http://guides.rubyonrails.org/layouts_and_rendering.html#asset-tag-helpers">Asset Tag Helpers</a></li>
<li><a href="http://guides.rubyonrails.org/layouts_and_rendering.html#understanding-yield">Understanding <code>yield</code></a></li>
<li><a href="http://guides.rubyonrails.org/layouts_and_rendering.html#using-the-content-for-method">Using the <code>content_for</code> Method</a></li>
<li><a href="http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials">Using Partials</a></li>
<li><a href="http://guides.rubyonrails.org/layouts_and_rendering.html#using-nested-layouts">Using Nested Layouts</a></li>
</ul>
</li>
</ol>

          </div>

    </div>
  </div>

  <div id="container">
    <div class="wrapper">
      <div id="mainCol">
        <h3 id="overview-how-the-pieces-fit-together">1 Overview: How the Pieces Fit Together</h3><p>This guide focuses on the interaction between Controller and View in the Model-View-Controller triangle. As you know, the Controller is responsible for orchestrating the whole process of handling a request in Rails, though it normally hands off any heavy code to the Model. But then, when it's time to send a response back to the user, the Controller hands things off to the View. It's that handoff that is the subject of this guide.</p><p>In broad strokes, this involves deciding what should be sent as the response and calling an appropriate method to create that response. If the response is a full-blown view, Rails also does some extra work to wrap the view in a layout and possibly to pull in partial views. You'll see all of those paths later in this guide.</p><h3 id="creating-responses">2 Creating Responses</h3><p>From the controller's point of view, there are three ways to create an HTTP response:</p>
<ul>
<li>Call <code>render</code> to create a full response to send back to the browser</li>
<li>Call <code>redirect_to</code> to send an HTTP redirect status code to the browser</li>
<li>Call <code>head</code> to create a response consisting solely of HTTP headers to send back to the browser</li>
</ul>
<h4 id="rendering-by-default-convention-over-configuration-in-action">2.1 Rendering by Default: Convention Over Configuration in Action</h4><p>You've heard that Rails promotes "convention over configuration". Default rendering is an excellent example of this. By default, controllers in Rails automatically render views with names that correspond to valid routes. For example, if you have this code in your <code>BooksController</code> class:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  ruby">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby keyword">class</code> <code class="ruby plain">BooksController &lt; ApplicationController</code></div><div class="line number2 index1 alt1"><code class="ruby keyword">end</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<p>And the following in your routes file:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  ruby">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">resources </code><code class="ruby color2">:books</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<p>And you have a view file <code>app/views/books/index.html.erb</code>:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  htmlscript">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">h1</code><code class="htmlscript plain">&gt;Books are coming soon!&lt;/</code><code class="htmlscript keyword">h1</code><code class="htmlscript plain">&gt;</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<p>Rails will automatically render <code>app/views/books/index.html.erb</code> when you navigate to <code>/books</code> and you will see "Books are coming soon!" on your screen.</p><p>However a coming soon screen is only minimally useful, so you will soon create your <code>Book</code> model and add the index action to <code>BooksController</code>:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  ruby">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby keyword">class</code> <code class="ruby plain">BooksController &lt; ApplicationController</code></div><div class="line number2 index1 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">def</code> <code class="ruby plain">index</code></div><div class="line number3 index2 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby variable bold">@books</code> <code class="ruby plain">= Book.all</code></div><div class="line number4 index3 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">end</code></div><div class="line number5 index4 alt2"><code class="ruby keyword">end</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<p>Note that we don't have explicit render at the end of the index action in accordance with "convention over configuration" principle. The rule is that if you do not explicitly render something at the end of a controller action, Rails will automatically look for the <code>action_name.html.erb</code> template in the controller's view path and render it. So in this case, Rails will render the <code>app/views/books/index.html.erb</code> file.</p><p>If we want to display the properties of all the books in our view, we can do so with an ERB template like this:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  htmlscript">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">h1</code><code class="htmlscript plain">&gt;Listing Books&lt;/</code><code class="htmlscript keyword">h1</code><code class="htmlscript plain">&gt;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">table</code><code class="htmlscript plain">&gt;</code></div><div class="line number4 index3 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">tr</code><code class="htmlscript plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">th</code><code class="htmlscript plain">&gt;Title&lt;/</code><code class="htmlscript keyword">th</code><code class="htmlscript plain">&gt;</code></div><div class="line number6 index5 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">th</code><code class="htmlscript plain">&gt;Summary&lt;/</code><code class="htmlscript keyword">th</code><code class="htmlscript plain">&gt;</code></div><div class="line number7 index6 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">th</code><code class="htmlscript plain">&gt;&lt;/</code><code class="htmlscript keyword">th</code><code class="htmlscript plain">&gt;</code></div><div class="line number8 index7 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">th</code><code class="htmlscript plain">&gt;&lt;/</code><code class="htmlscript keyword">th</code><code class="htmlscript plain">&gt;</code></div><div class="line number9 index8 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">th</code><code class="htmlscript plain">&gt;&lt;/</code><code class="htmlscript keyword">th</code><code class="htmlscript plain">&gt;</code></div><div class="line number10 index9 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">tr</code><code class="ruby plain">&gt;</code></div><div class="line number11 index10 alt2">&nbsp;</div><div class="line number12 index11 alt1"><code class="ruby script">&lt;%</code> <code class="ruby variable bold">@books</code><code class="ruby plain">.</code><code class="ruby keyword">each</code> <code class="ruby keyword">do</code> <code class="ruby plain">|book| </code><code class="ruby script">%&gt;</code></div><div class="line number13 index12 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">tr</code><code class="htmlscript plain">&gt;</code></div><div class="line number14 index13 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">td</code><code class="ruby plain">&gt;</code><code class="ruby script">&lt;%=</code> <code class="ruby plain">book.title </code><code class="ruby script">%&gt;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">td</code><code class="htmlscript plain">&gt;</code></div><div class="line number15 index14 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">td</code><code class="ruby plain">&gt;</code><code class="ruby script">&lt;%=</code> <code class="ruby plain">book.content </code><code class="ruby script">%&gt;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">td</code><code class="htmlscript plain">&gt;</code></div><div class="line number16 index15 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">td</code><code class="ruby plain">&gt;</code><code class="ruby script">&lt;%=</code> <code class="ruby plain">link_to </code><code class="ruby string">"Show"</code><code class="ruby plain">, book </code><code class="ruby script">%&gt;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">td</code><code class="htmlscript plain">&gt;</code></div><div class="line number17 index16 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">td</code><code class="ruby plain">&gt;</code><code class="ruby script">&lt;%=</code> <code class="ruby plain">link_to </code><code class="ruby string">"Edit"</code><code class="ruby plain">, edit_book_path(book) </code><code class="ruby script">%&gt;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">td</code><code class="htmlscript plain">&gt;</code></div><div class="line number18 index17 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">td</code><code class="ruby plain">&gt;</code><code class="ruby script">&lt;%=</code> <code class="ruby plain">link_to </code><code class="ruby string">"Remove"</code><code class="ruby plain">, book, method: </code><code class="ruby color2">:delete</code><code class="ruby plain">, data: { confirm: </code><code class="ruby string">"Are you sure?"</code> <code class="ruby plain">} </code><code class="ruby script">%&gt;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">td</code><code class="htmlscript plain">&gt;</code></div><div class="line number19 index18 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">tr</code><code class="ruby plain">&gt;</code></div><div class="line number20 index19 alt1"><code class="ruby script">&lt;%</code> <code class="ruby keyword">end</code> <code class="ruby script">%&gt;</code></div><div class="line number21 index20 alt2"><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">table</code><code class="htmlscript plain">&gt;</code></div><div class="line number22 index21 alt1">&nbsp;</div><div class="line number23 index22 alt2"><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">br</code><code class="ruby plain">&gt;</code></div><div class="line number24 index23 alt1">&nbsp;</div><div class="line number25 index24 alt2"><code class="ruby script">&lt;%=</code> <code class="ruby plain">link_to </code><code class="ruby string">"New book"</code><code class="ruby plain">, new_book_path </code><code class="ruby script">%&gt;</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<div class="note"><p>The actual rendering is done by subclasses of <code>ActionView::TemplateHandlers</code>. This guide does not dig into that process, but it's important to know that the file extension on your view controls the choice of template handler. Beginning with Rails 2, the standard extensions are <code>.erb</code> for ERB (HTML with embedded Ruby), and <code>.builder</code> for Builder (XML generator).</p></div><h4 id="using-render">2.2 Using <code>render</code>
</h4><p>In most cases, the <code>ActionController::Base#render</code> method does the heavy lifting of rendering your application's content for use by a browser. There are a variety of ways to customize the behavior of <code>render</code>. You can render the default view for a Rails template, or a specific template, or a file, or inline code, or nothing at all. You can render text, JSON, or XML. You can specify the content type or HTTP status of the rendered response as well.</p><div class="info"><p>If you want to see the exact results of a call to <code>render</code> without needing to inspect it in a browser, you can call <code>render_to_string</code>. This method takes exactly the same options as <code>render</code>, but it returns a string instead of sending a response back to the browser.</p></div><h5 id="rendering-an-action-s-view">2.2.1 Rendering an Action's View</h5><p>If you want to render the view that corresponds to a different template within the same controller, you can use <code>render</code> with the name of the view:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  ruby">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby keyword">def</code> <code class="ruby plain">update</code></div><div class="line number2 index1 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby variable bold">@book</code> <code class="ruby plain">= Book.find(params[</code><code class="ruby color2">:id</code><code class="ruby plain">])</code></div><div class="line number3 index2 alt2"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">if</code> <code class="ruby variable bold">@book</code><code class="ruby plain">.update(book_params)</code></div><div class="line number4 index3 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">redirect_to(</code><code class="ruby variable bold">@book</code><code class="ruby plain">)</code></div><div class="line number5 index4 alt2"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">else</code></div><div class="line number6 index5 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">render </code><code class="ruby string">"edit"</code></div><div class="line number7 index6 alt2"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">end</code></div><div class="line number8 index7 alt1"><code class="ruby keyword">end</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<p>If the call to <code>update</code> fails, calling the <code>update</code> action in this controller will render the <code>edit.html.erb</code> template belonging to the same controller.</p><p>If you prefer, you can use a symbol instead of a string to specify the action to render:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  ruby">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby keyword">def</code> <code class="ruby plain">update</code></div><div class="line number2 index1 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby variable bold">@book</code> <code class="ruby plain">= Book.find(params[</code><code class="ruby color2">:id</code><code class="ruby plain">])</code></div><div class="line number3 index2 alt2"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">if</code> <code class="ruby variable bold">@book</code><code class="ruby plain">.update(book_params)</code></div><div class="line number4 index3 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">redirect_to(</code><code class="ruby variable bold">@book</code><code class="ruby plain">)</code></div><div class="line number5 index4 alt2"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">else</code></div><div class="line number6 index5 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">render </code><code class="ruby color2">:edit</code></div><div class="line number7 index6 alt2"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">end</code></div><div class="line number8 index7 alt1"><code class="ruby keyword">end</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<h5 id="rendering-an-action-s-template-from-another-controller">2.2.2 Rendering an Action's Template from Another Controller</h5><p>What if you want to render a template from an entirely different controller from the one that contains the action code? You can also do that with <code>render</code>, which accepts the full path (relative to <code>app/views</code>) of the template to render. For example, if you're running code in an <code>AdminProductsController</code> that lives in <code>app/controllers/admin</code>, you can render the results of an action to a template in <code>app/views/products</code> this way:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  ruby">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">render </code><code class="ruby string">"products/show"</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<p>Rails knows that this view belongs to a different controller because of the embedded slash character in the string. If you want to be explicit, you can use the <code>:template</code> option (which was required on Rails 2.2 and earlier):</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  ruby">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">render template: </code><code class="ruby string">"products/show"</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<h5 id="rendering-an-arbitrary-file">2.2.3 Rendering an Arbitrary File</h5><p>The <code>render</code> method can also use a view that's entirely outside of your application:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  ruby">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">render file: </code><code class="ruby string">"/u/apps/warehouse_app/current/app/views/products/show"</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<p>The <code>:file</code> option takes an absolute file-system path. Of course, you need to have rights
to the view that you're using to render the content.</p><div class="note"><p>Using the <code>:file</code> option in combination with users input can lead to security problems
since an attacker could use this action to access security sensitive files in your file system.</p></div><div class="note"><p>By default, the file is rendered using the current layout.</p></div><div class="info"><p>If you're running Rails on Microsoft Windows, you should use the <code>:file</code> option to
render a file, because Windows filenames do not have the same format as Unix filenames.</p></div><h5 id="wrapping-it-up">2.2.4 Wrapping it up</h5><p>The above three ways of rendering (rendering another template within the controller, rendering a template within another controller and rendering an arbitrary file on the file system) are actually variants of the same action.</p><p>In fact, in the BooksController class, inside of the update action where we want to render the edit template if the book does not update successfully, all of the following render calls would all render the <code>edit.html.erb</code> template in the <code>views/books</code> directory:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  ruby">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">render </code><code class="ruby color2">:edit</code></div><div class="line number2 index1 alt1"><code class="ruby plain">render action: </code><code class="ruby color2">:edit</code></div><div class="line number3 index2 alt2"><code class="ruby plain">render </code><code class="ruby string">"edit"</code></div><div class="line number4 index3 alt1"><code class="ruby plain">render </code><code class="ruby string">"edit.html.erb"</code></div><div class="line number5 index4 alt2"><code class="ruby plain">render action: </code><code class="ruby string">"edit"</code></div><div class="line number6 index5 alt1"><code class="ruby plain">render action: </code><code class="ruby string">"edit.html.erb"</code></div><div class="line number7 index6 alt2"><code class="ruby plain">render </code><code class="ruby string">"books/edit"</code></div><div class="line number8 index7 alt1"><code class="ruby plain">render </code><code class="ruby string">"books/edit.html.erb"</code></div><div class="line number9 index8 alt2"><code class="ruby plain">render template: </code><code class="ruby string">"books/edit"</code></div><div class="line number10 index9 alt1"><code class="ruby plain">render template: </code><code class="ruby string">"books/edit.html.erb"</code></div><div class="line number11 index10 alt2"><code class="ruby plain">render </code><code class="ruby string">"/path/to/rails/app/views/books/edit"</code></div><div class="line number12 index11 alt1"><code class="ruby plain">render </code><code class="ruby string">"/path/to/rails/app/views/books/edit.html.erb"</code></div><div class="line number13 index12 alt2"><code class="ruby plain">render file: </code><code class="ruby string">"/path/to/rails/app/views/books/edit"</code></div><div class="line number14 index13 alt1"><code class="ruby plain">render file: </code><code class="ruby string">"/path/to/rails/app/views/books/edit.html.erb"</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<p>Which one you use is really a matter of style and convention, but the rule of thumb is to use the simplest one that makes sense for the code you are writing.</p><h5 id="using-render-with-inline">2.2.5 Using <code>render</code> with <code>:inline</code>
</h5><p>The <code>render</code> method can do without a view completely, if you're willing to use the <code>:inline</code> option to supply ERB as part of the method call. This is perfectly valid:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  ruby">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">render inline: </code><code class="ruby string">"&lt;% products.each do |p| %&gt;&lt;p&gt;&lt;%= p.name %&gt;&lt;/p&gt;&lt;% end %&gt;"</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<div class="warning"><p>There is seldom any good reason to use this option. Mixing ERB into your controllers defeats the MVC orientation of Rails and will make it harder for other developers to follow the logic of your project. Use a separate erb view instead.</p></div><p>By default, inline rendering uses ERB. You can force it to use Builder instead with the <code>:type</code> option:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  ruby">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">render inline: </code><code class="ruby string">"xml.p {'Horrid coding practice!'}"</code><code class="ruby plain">, type: </code><code class="ruby color2">:builder</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<h5 id="rendering-text">2.2.6 Rendering Text</h5><p>You can send plain text - with no markup at all - back to the browser by using
the <code>:plain</code> option to <code>render</code>:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  ruby">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">render plain: </code><code class="ruby string">"OK"</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<div class="info"><p>Rendering pure text is most useful when you're responding to Ajax or web
service requests that are expecting something other than proper HTML.</p></div><div class="note"><p>By default, if you use the <code>:plain</code> option, the text is rendered without
using the current layout. If you want Rails to put the text into the current
layout, you need to add the <code>layout: true</code> option and use the <code>.txt.erb</code>
extension for the layout file.</p></div><h5 id="rendering-html">2.2.7 Rendering HTML</h5><p>You can send an HTML string back to the browser by using the <code>:html</code> option to
<code>render</code>:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  ruby">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">render html: </code><code class="ruby string">"&lt;strong&gt;Not Found&lt;/strong&gt;"</code><code class="ruby plain">.html_safe</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<div class="info"><p>This is useful when you're rendering a small snippet of HTML code.
However, you might want to consider moving it to a template file if the markup
is complex.</p></div><div class="note"><p>When using <code>html:</code> option, HTML entities will be escaped if the string is not marked as HTML safe by using <code>html_safe</code> method.</p></div><h5 id="rendering-json">2.2.8 Rendering JSON</h5><p>JSON is a JavaScript data format used by many Ajax libraries. Rails has built-in support for converting objects to JSON and rendering that JSON back to the browser:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  ruby">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">render json: </code><code class="ruby variable bold">@product</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<div class="info"><p>You don't need to call <code>to_json</code> on the object that you want to render. If you use the <code>:json</code> option, <code>render</code> will automatically call <code>to_json</code> for you.</p></div><h5 id="rendering-xml">2.2.9 Rendering XML</h5><p>Rails also has built-in support for converting objects to XML and rendering that XML back to the caller:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  ruby">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">render xml: </code><code class="ruby variable bold">@product</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<div class="info"><p>You don't need to call <code>to_xml</code> on the object that you want to render. If you use the <code>:xml</code> option, <code>render</code> will automatically call <code>to_xml</code> for you.</p></div><h5 id="rendering-vanilla-javascript">2.2.10 Rendering Vanilla JavaScript</h5><p>Rails can render vanilla JavaScript:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  ruby">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">render js: </code><code class="ruby string">"alert('Hello Rails');"</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<p>This will send the supplied string to the browser with a MIME type of <code>text/javascript</code>.</p><h5 id="rendering-raw-body">2.2.11 Rendering raw body</h5><p>You can send a raw content back to the browser, without setting any content
type, by using the <code>:body</code> option to <code>render</code>:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  ruby">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">render body: </code><code class="ruby string">"raw"</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<div class="info"><p>This option should be used only if you don't care about the content type of
the response. Using <code>:plain</code> or <code>:html</code> might be more appropriate most of the
time.</p></div><div class="note"><p>Unless overridden, your response returned from this render option will be
<code>text/html</code>, as that is the default content type of Action Dispatch response.</p></div><h5 id="options-for-render">2.2.12 Options for <code>render</code>
</h5><p>Calls to the <code>render</code> method generally accept five options:</p>
<ul>
<li><code>:content_type</code></li>
<li><code>:layout</code></li>
<li><code>:location</code></li>
<li><code>:status</code></li>
<li><code>:formats</code></li>
</ul>
<h6 id="the-content-type-option">2.2.12.1 The <code>:content_type</code> Option</h6><p>By default, Rails will serve the results of a rendering operation with the MIME content-type of <code>text/html</code> (or <code>application/json</code> if you use the <code>:json</code> option, or <code>application/xml</code> for the <code>:xml</code> option.). There are times when you might like to change this, and you can do so by setting the <code>:content_type</code> option:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  ruby">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">render file: filename, content_type: </code><code class="ruby string">"application/rss"</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<h6 id="the-layout-option">2.2.12.2 The <code>:layout</code> Option</h6><p>With most of the options to <code>render</code>, the rendered content is displayed as part of the current layout. You'll learn more about layouts and how to use them later in this guide.</p><p>You can use the <code>:layout</code> option to tell Rails to use a specific file as the layout for the current action:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  ruby">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">render layout: </code><code class="ruby string">"special_layout"</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<p>You can also tell Rails to render with no layout at all:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  ruby">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">render layout: </code><code class="ruby keyword">false</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<h6 id="the-location-option">2.2.12.3 The <code>:location</code> Option</h6><p>You can use the <code>:location</code> option to set the HTTP <code>Location</code> header:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  ruby">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">render xml: photo, location: photo_url(photo)</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<h6 id="the-status-option">2.2.12.4 The <code>:status</code> Option</h6><p>Rails will automatically generate a response with the correct HTTP status code (in most cases, this is <code>200 OK</code>). You can use the <code>:status</code> option to change this:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  ruby">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">render status: </code><code class="ruby constants">500</code></div><div class="line number2 index1 alt1"><code class="ruby plain">render status: </code><code class="ruby color2">:forbidden</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<p>Rails understands both numeric status codes and the corresponding symbols shown below.</p>
<table class="responsive">
<thead>
<tr>
<th>Response Class</th>
<th>HTTP Status Code</th>
<th>Symbol</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Informational</strong></td>
<td>100</td>
<td>:continue</td>
</tr>
<tr>
<td></td>
<td>101</td>
<td>:switching_protocols</td>
</tr>
<tr>
<td></td>
<td>102</td>
<td>:processing</td>
</tr>
<tr>
<td><strong>Success</strong></td>
<td>200</td>
<td>:ok</td>
</tr>
<tr>
<td></td>
<td>201</td>
<td>:created</td>
</tr>
<tr>
<td></td>
<td>202</td>
<td>:accepted</td>
</tr>
<tr>
<td></td>
<td>203</td>
<td>:non_authoritative_information</td>
</tr>
<tr>
<td></td>
<td>204</td>
<td>:no_content</td>
</tr>
<tr>
<td></td>
<td>205</td>
<td>:reset_content</td>
</tr>
<tr>
<td></td>
<td>206</td>
<td>:partial_content</td>
</tr>
<tr>
<td></td>
<td>207</td>
<td>:multi_status</td>
</tr>
<tr>
<td></td>
<td>208</td>
<td>:already_reported</td>
</tr>
<tr>
<td></td>
<td>226</td>
<td>:im_used</td>
</tr>
<tr>
<td><strong>Redirection</strong></td>
<td>300</td>
<td>:multiple_choices</td>
</tr>
<tr>
<td></td>
<td>301</td>
<td>:moved_permanently</td>
</tr>
<tr>
<td></td>
<td>302</td>
<td>:found</td>
</tr>
<tr>
<td></td>
<td>303</td>
<td>:see_other</td>
</tr>
<tr>
<td></td>
<td>304</td>
<td>:not_modified</td>
</tr>
<tr>
<td></td>
<td>305</td>
<td>:use_proxy</td>
</tr>
<tr>
<td></td>
<td>307</td>
<td>:temporary_redirect</td>
</tr>
<tr>
<td></td>
<td>308</td>
<td>:permanent_redirect</td>
</tr>
<tr>
<td><strong>Client Error</strong></td>
<td>400</td>
<td>:bad_request</td>
</tr>
<tr>
<td></td>
<td>401</td>
<td>:unauthorized</td>
</tr>
<tr>
<td></td>
<td>402</td>
<td>:payment_required</td>
</tr>
<tr>
<td></td>
<td>403</td>
<td>:forbidden</td>
</tr>
<tr>
<td></td>
<td>404</td>
<td>:not_found</td>
</tr>
<tr>
<td></td>
<td>405</td>
<td>:method_not_allowed</td>
</tr>
<tr>
<td></td>
<td>406</td>
<td>:not_acceptable</td>
</tr>
<tr>
<td></td>
<td>407</td>
<td>:proxy_authentication_required</td>
</tr>
<tr>
<td></td>
<td>408</td>
<td>:request_timeout</td>
</tr>
<tr>
<td></td>
<td>409</td>
<td>:conflict</td>
</tr>
<tr>
<td></td>
<td>410</td>
<td>:gone</td>
</tr>
<tr>
<td></td>
<td>411</td>
<td>:length_required</td>
</tr>
<tr>
<td></td>
<td>412</td>
<td>:precondition_failed</td>
</tr>
<tr>
<td></td>
<td>413</td>
<td>:payload_too_large</td>
</tr>
<tr>
<td></td>
<td>414</td>
<td>:uri_too_long</td>
</tr>
<tr>
<td></td>
<td>415</td>
<td>:unsupported_media_type</td>
</tr>
<tr>
<td></td>
<td>416</td>
<td>:range_not_satisfiable</td>
</tr>
<tr>
<td></td>
<td>417</td>
<td>:expectation_failed</td>
</tr>
<tr>
<td></td>
<td>422</td>
<td>:unprocessable_entity</td>
</tr>
<tr>
<td></td>
<td>423</td>
<td>:locked</td>
</tr>
<tr>
<td></td>
<td>424</td>
<td>:failed_dependency</td>
</tr>
<tr>
<td></td>
<td>426</td>
<td>:upgrade_required</td>
</tr>
<tr>
<td></td>
<td>428</td>
<td>:precondition_required</td>
</tr>
<tr>
<td></td>
<td>429</td>
<td>:too_many_requests</td>
</tr>
<tr>
<td></td>
<td>431</td>
<td>:request_header_fields_too_large</td>
</tr>
<tr>
<td><strong>Server Error</strong></td>
<td>500</td>
<td>:internal_server_error</td>
</tr>
<tr>
<td></td>
<td>501</td>
<td>:not_implemented</td>
</tr>
<tr>
<td></td>
<td>502</td>
<td>:bad_gateway</td>
</tr>
<tr>
<td></td>
<td>503</td>
<td>:service_unavailable</td>
</tr>
<tr>
<td></td>
<td>504</td>
<td>:gateway_timeout</td>
</tr>
<tr>
<td></td>
<td>505</td>
<td>:http_version_not_supported</td>
</tr>
<tr>
<td></td>
<td>506</td>
<td>:variant_also_negotiates</td>
</tr>
<tr>
<td></td>
<td>507</td>
<td>:insufficient_storage</td>
</tr>
<tr>
<td></td>
<td>508</td>
<td>:loop_detected</td>
</tr>
<tr>
<td></td>
<td>510</td>
<td>:not_extended</td>
</tr>
<tr>
<td></td>
<td>511</td>
<td>:network_authentication_required</td>
</tr>
</tbody>
</table>
<div class="note"><p>If you try to render content along with a non-content status code
(100-199, 204, 205 or 304), it will be dropped from the response.</p></div><h6 id="the-formats-option">2.2.12.5 The <code>:formats</code> Option</h6><p>Rails uses the format specified in the request (or <code>:html</code> by default). You can
change this passing the <code>:formats</code> option with a symbol or an array:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  ruby">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">render formats: </code><code class="ruby color2">:xml</code></div><div class="line number2 index1 alt1"><code class="ruby plain">render formats: [</code><code class="ruby color2">:json</code><code class="ruby plain">, </code><code class="ruby color2">:xml</code><code class="ruby plain">]</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<h5 id="finding-layouts">2.2.13 Finding Layouts</h5><p>To find the current layout, Rails first looks for a file in <code>app/views/layouts</code> with the same base name as the controller. For example, rendering actions from the <code>PhotosController</code> class will use <code>app/views/layouts/photos.html.erb</code> (or <code>app/views/layouts/photos.builder</code>). If there is no such controller-specific layout, Rails will use <code>app/views/layouts/application.html.erb</code> or <code>app/views/layouts/application.builder</code>. If there is no <code>.erb</code> layout, Rails will use a <code>.builder</code> layout if one exists. Rails also provides several ways to more precisely assign specific layouts to individual controllers and actions.</p><h6 id="specifying-layouts-for-controllers">2.2.13.1 Specifying Layouts for Controllers</h6><p>You can override the default layout conventions in your controllers by using the <code>layout</code> declaration. For example:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  ruby">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby keyword">class</code> <code class="ruby plain">ProductsController &lt; ApplicationController</code></div><div class="line number2 index1 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">layout </code><code class="ruby string">"inventory"</code></div><div class="line number3 index2 alt2"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby comments">#...</code></div><div class="line number4 index3 alt1"><code class="ruby keyword">end</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<p>With this declaration, all of the views rendered by the <code>ProductsController</code> will use <code>app/views/layouts/inventory.html.erb</code> as their layout.</p><p>To assign a specific layout for the entire application, use a <code>layout</code> declaration in your <code>ApplicationController</code> class:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  ruby">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby keyword">class</code> <code class="ruby plain">ApplicationController &lt; ActionController::Base</code></div><div class="line number2 index1 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">layout </code><code class="ruby string">"main"</code></div><div class="line number3 index2 alt2"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby comments">#...</code></div><div class="line number4 index3 alt1"><code class="ruby keyword">end</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<p>With this declaration, all of the views in the entire application will use <code>app/views/layouts/main.html.erb</code> for their layout.</p><h6 id="choosing-layouts-at-runtime">2.2.13.2 Choosing Layouts at Runtime</h6><p>You can use a symbol to defer the choice of layout until a request is processed:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  ruby">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby keyword">class</code> <code class="ruby plain">ProductsController &lt; ApplicationController</code></div><div class="line number2 index1 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">layout </code><code class="ruby color2">:products_layout</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">def</code> <code class="ruby plain">show</code></div><div class="line number5 index4 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby variable bold">@product</code> <code class="ruby plain">= Product.find(params[</code><code class="ruby color2">:id</code><code class="ruby plain">])</code></div><div class="line number6 index5 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">end</code></div><div class="line number7 index6 alt2">&nbsp;</div><div class="line number8 index7 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">private</code></div><div class="line number9 index8 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby keyword">def</code> <code class="ruby plain">products_layout</code></div><div class="line number10 index9 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby variable bold">@current_user</code><code class="ruby plain">.special? ? </code><code class="ruby string">"special"</code> <code class="ruby plain">: </code><code class="ruby string">"products"</code></div><div class="line number11 index10 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby keyword">end</code></div><div class="line number12 index11 alt1">&nbsp;</div><div class="line number13 index12 alt2"><code class="ruby keyword">end</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<p>Now, if the current user is a special user, they'll get a special layout when viewing a product.</p><p>You can even use an inline method, such as a Proc, to determine the layout. For example, if you pass a Proc object, the block you give the Proc will be given the <code>controller</code> instance, so the layout can be determined based on the current request:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  ruby">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby keyword">class</code> <code class="ruby plain">ProductsController &lt; ApplicationController</code></div><div class="line number2 index1 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">layout </code><code class="ruby color1">Proc</code><code class="ruby plain">.</code><code class="ruby keyword">new</code> <code class="ruby plain">{ |controller| controller.request.xhr? ? </code><code class="ruby string">"popup"</code> <code class="ruby plain">: </code><code class="ruby string">"application"</code> <code class="ruby plain">}</code></div><div class="line number3 index2 alt2"><code class="ruby keyword">end</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<h6 id="conditional-layouts">2.2.13.3 Conditional Layouts</h6><p>Layouts specified at the controller level support the <code>:only</code> and <code>:except</code> options. These options take either a method name, or an array of method names, corresponding to method names within the controller:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  ruby">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby keyword">class</code> <code class="ruby plain">ProductsController &lt; ApplicationController</code></div><div class="line number2 index1 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">layout </code><code class="ruby string">"product"</code><code class="ruby plain">, except: [</code><code class="ruby color2">:index</code><code class="ruby plain">, </code><code class="ruby color2">:rss</code><code class="ruby plain">]</code></div><div class="line number3 index2 alt2"><code class="ruby keyword">end</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<p>With this declaration, the <code>product</code> layout would be used for everything but the <code>rss</code> and <code>index</code> methods.</p><h6 id="layout-inheritance">2.2.13.4 Layout Inheritance</h6><p>Layout declarations cascade downward in the hierarchy, and more specific layout declarations always override more general ones. For example:</p>
<ul>
<li>
<p><code>application_controller.rb</code></p>
<div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  ruby">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby keyword">class</code> <code class="ruby plain">ApplicationController &lt; ActionController::Base</code></div><div class="line number2 index1 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">layout </code><code class="ruby string">"main"</code></div><div class="line number3 index2 alt2"><code class="ruby keyword">end</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
</li>
<li>
<p><code>articles_controller.rb</code></p>
<div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  ruby">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby keyword">class</code> <code class="ruby plain">ArticlesController &lt; ApplicationController</code></div><div class="line number2 index1 alt1"><code class="ruby keyword">end</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
</li>
<li>
<p><code>special_articles_controller.rb</code></p>
<div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  ruby">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby keyword">class</code> <code class="ruby plain">SpecialArticlesController &lt; ArticlesController</code></div><div class="line number2 index1 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">layout </code><code class="ruby string">"special"</code></div><div class="line number3 index2 alt2"><code class="ruby keyword">end</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
</li>
<li>
<p><code>old_articles_controller.rb</code></p>
<div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  ruby">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby keyword">class</code> <code class="ruby plain">OldArticlesController &lt; SpecialArticlesController</code></div><div class="line number2 index1 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">layout </code><code class="ruby keyword">false</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">def</code> <code class="ruby plain">show</code></div><div class="line number5 index4 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby variable bold">@article</code> <code class="ruby plain">= Article.find(params[</code><code class="ruby color2">:id</code><code class="ruby plain">])</code></div><div class="line number6 index5 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">end</code></div><div class="line number7 index6 alt2">&nbsp;</div><div class="line number8 index7 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">def</code> <code class="ruby plain">index</code></div><div class="line number9 index8 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby variable bold">@old_articles</code> <code class="ruby plain">= Article.older</code></div><div class="line number10 index9 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">render layout: </code><code class="ruby string">"old"</code></div><div class="line number11 index10 alt2"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">end</code></div><div class="line number12 index11 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby comments"># ...</code></div><div class="line number13 index12 alt2"><code class="ruby keyword">end</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
</li>
</ul>
<p>In this application:</p>
<ul>
<li>In general, views will be rendered in the <code>main</code> layout</li>
<li>
<code>ArticlesController#index</code> will use the <code>main</code> layout</li>
<li>
<code>SpecialArticlesController#index</code> will use the <code>special</code> layout</li>
<li>
<code>OldArticlesController#show</code> will use no layout at all</li>
<li>
<code>OldArticlesController#index</code> will use the <code>old</code> layout</li>
</ul>
<h6 id="template-inheritance">2.2.13.5 Template Inheritance</h6><p>Similar to the Layout Inheritance logic, if a template or partial is not found in the conventional path, the controller will look for a template or partial to render in its inheritance chain. For example:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  ruby">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby comments"># in app/controllers/application_controller</code></div><div class="line number2 index1 alt1"><code class="ruby keyword">class</code> <code class="ruby plain">ApplicationController &lt; ActionController::Base</code></div><div class="line number3 index2 alt2"><code class="ruby keyword">end</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="ruby comments"># in app/controllers/admin_controller</code></div><div class="line number6 index5 alt1"><code class="ruby keyword">class</code> <code class="ruby plain">AdminController &lt; ApplicationController</code></div><div class="line number7 index6 alt2"><code class="ruby keyword">end</code></div><div class="line number8 index7 alt1">&nbsp;</div><div class="line number9 index8 alt2"><code class="ruby comments"># in app/controllers/admin/products_controller</code></div><div class="line number10 index9 alt1"><code class="ruby keyword">class</code> <code class="ruby plain">Admin::ProductsController &lt; AdminController</code></div><div class="line number11 index10 alt2"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">def</code> <code class="ruby plain">index</code></div><div class="line number12 index11 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">end</code></div><div class="line number13 index12 alt2"><code class="ruby keyword">end</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<p>The lookup order for an <code>admin/products#index</code> action will be:</p>
<ul>
<li><code>app/views/admin/products/</code></li>
<li><code>app/views/admin/</code></li>
<li><code>app/views/application/</code></li>
</ul>
<p>This makes <code>app/views/application/</code> a great place for your shared partials, which can then be rendered in your ERB as such:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  htmlscript">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby script">&lt;%</code><code class="ruby comments"># app/views/admin/products/index.html.erb </code><code class="ruby script">%&gt;</code></div><div class="line number2 index1 alt1"><code class="ruby script">&lt;%=</code> <code class="ruby plain">render </code><code class="ruby variable bold">@products</code> <code class="ruby plain">|| </code><code class="ruby string">"empty_list"</code> <code class="ruby script">%&gt;</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="ruby script">&lt;%</code><code class="ruby comments"># app/views/application/_empty_list.html.erb </code><code class="ruby script">%&gt;</code></div><div class="line number5 index4 alt2"><code class="htmlscript plain">There are no items in this list &lt;</code><code class="htmlscript keyword">em</code><code class="htmlscript plain">&gt;yet&lt;/</code><code class="htmlscript keyword">em</code><code class="htmlscript plain">&gt;.</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<h5 id="avoiding-double-render-errors">2.2.14 Avoiding Double Render Errors</h5><p>Sooner or later, most Rails developers will see the error message "Can only render or redirect once per action". While this is annoying, it's relatively easy to fix. Usually it happens because of a fundamental misunderstanding of the way that <code>render</code> works.</p><p>For example, here's some code that will trigger this error:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  ruby">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby keyword">def</code> <code class="ruby plain">show</code></div><div class="line number2 index1 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby variable bold">@book</code> <code class="ruby plain">= Book.find(params[</code><code class="ruby color2">:id</code><code class="ruby plain">])</code></div><div class="line number3 index2 alt2"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">if</code> <code class="ruby variable bold">@book</code><code class="ruby plain">.special?</code></div><div class="line number4 index3 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">render action: </code><code class="ruby string">"special_show"</code></div><div class="line number5 index4 alt2"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">end</code></div><div class="line number6 index5 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">render action: </code><code class="ruby string">"regular_show"</code></div><div class="line number7 index6 alt2"><code class="ruby keyword">end</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<p>If <code>@book.special?</code> evaluates to <code>true</code>, Rails will start the rendering process to dump the <code>@book</code> variable into the <code>special_show</code> view. But this will <em>not</em> stop the rest of the code in the <code>show</code> action from running, and when Rails hits the end of the action, it will start to render the <code>regular_show</code> view - and throw an error. The solution is simple: make sure that you have only one call to <code>render</code> or <code>redirect</code> in a single code path. One thing that can help is <code>and return</code>. Here's a patched version of the method:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  ruby">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby keyword">def</code> <code class="ruby plain">show</code></div><div class="line number2 index1 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby variable bold">@book</code> <code class="ruby plain">= Book.find(params[</code><code class="ruby color2">:id</code><code class="ruby plain">])</code></div><div class="line number3 index2 alt2"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">if</code> <code class="ruby variable bold">@book</code><code class="ruby plain">.special?</code></div><div class="line number4 index3 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">render action: </code><code class="ruby string">"special_show"</code> <code class="ruby keyword">and</code> <code class="ruby keyword">return</code></div><div class="line number5 index4 alt2"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">end</code></div><div class="line number6 index5 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby plain">render action: </code><code class="ruby string">"regular_show"</code></div><div class="line number7 index6 alt2"><code class="ruby keyword">end</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<p>Make sure to use <code>and return</code> instead of <code>&amp;&amp; return</code> because <code>&amp;&amp; return</code> will not work due to the operator precedence in the Ruby Language.</p><p>Note that the implicit render done by ActionController detects if <code>render</code> has been called, so the following will work without errors:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  ruby">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby keyword">def</code> <code class="ruby plain">show</code></div><div class="line number2 index1 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby variable bold">@book</code> <code class="ruby plain">= Book.find(params[</code><code class="ruby color2">:id</code><code class="ruby plain">])</code></div><div class="line number3 index2 alt2"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">if</code> <code class="ruby variable bold">@book</code><code class="ruby plain">.special?</code></div><div class="line number4 index3 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">render action: </code><code class="ruby string">"special_show"</code></div><div class="line number5 index4 alt2"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">end</code></div><div class="line number6 index5 alt1"><code class="ruby keyword">end</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<p>This will render a book with <code>special?</code> set with the <code>special_show</code> template, while other books will render with the default <code>show</code> template.</p><h4 id="using-redirect-to">2.3 Using <code>redirect_to</code>
</h4><p>Another way to handle returning responses to an HTTP request is with <code>redirect_to</code>. As you've seen, <code>render</code> tells Rails which view (or other asset) to use in constructing a response. The <code>redirect_to</code> method does something completely different: it tells the browser to send a new request for a different URL. For example, you could redirect from wherever you are in your code to the index of photos in your application with this call:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  ruby">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">redirect_to photos_url</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<p>You can use <code>redirect_back</code> to return the user to the page they just came from.
This location is pulled from the <code>HTTP_REFERER</code> header which is not guaranteed
to be set by the browser, so you must provide the <code>fallback_location</code>
to use in this case.</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  ruby">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">redirect_back(fallback_location: root_path)</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<h5 id="getting-a-different-redirect-status-code">2.3.1 Getting a Different Redirect Status Code</h5><p>Rails uses HTTP status code 302, a temporary redirect, when you call <code>redirect_to</code>. If you'd like to use a different status code, perhaps 301, a permanent redirect, you can use the <code>:status</code> option:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  ruby">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">redirect_to photos_path, status: </code><code class="ruby constants">301</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<p>Just like the <code>:status</code> option for <code>render</code>, <code>:status</code> for <code>redirect_to</code> accepts both numeric and symbolic header designations.</p><h5 id="the-difference-between-render-and-redirect-to">2.3.2 The Difference Between <code>render</code> and <code>redirect_to</code>
</h5><p>Sometimes inexperienced developers think of <code>redirect_to</code> as a sort of <code>goto</code> command, moving execution from one place to another in your Rails code. This is <em>not</em> correct. Your code stops running and waits for a new request for the browser. It just happens that you've told the browser what request it should make next, by sending back an HTTP 302 status code.</p><p>Consider these actions to see the difference:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  ruby">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby keyword">def</code> <code class="ruby plain">index</code></div><div class="line number2 index1 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby variable bold">@books</code> <code class="ruby plain">= Book.all</code></div><div class="line number3 index2 alt2"><code class="ruby keyword">end</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="ruby keyword">def</code> <code class="ruby plain">show</code></div><div class="line number6 index5 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby variable bold">@book</code> <code class="ruby plain">= Book.find_by(id: params[</code><code class="ruby color2">:id</code><code class="ruby plain">])</code></div><div class="line number7 index6 alt2"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">if</code> <code class="ruby variable bold">@book</code><code class="ruby plain">.</code><code class="ruby keyword">nil</code><code class="ruby plain">?</code></div><div class="line number8 index7 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">render action: </code><code class="ruby string">"index"</code></div><div class="line number9 index8 alt2"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">end</code></div><div class="line number10 index9 alt1"><code class="ruby keyword">end</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<p>With the code in this form, there will likely be a problem if the <code>@book</code> variable is <code>nil</code>. Remember, a <code>render :action</code> doesn't run any code in the target action, so nothing will set up the <code>@books</code> variable that the <code>index</code> view will probably require. One way to fix this is to redirect instead of rendering:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  ruby">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby keyword">def</code> <code class="ruby plain">index</code></div><div class="line number2 index1 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby variable bold">@books</code> <code class="ruby plain">= Book.all</code></div><div class="line number3 index2 alt2"><code class="ruby keyword">end</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="ruby keyword">def</code> <code class="ruby plain">show</code></div><div class="line number6 index5 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby variable bold">@book</code> <code class="ruby plain">= Book.find_by(id: params[</code><code class="ruby color2">:id</code><code class="ruby plain">])</code></div><div class="line number7 index6 alt2"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">if</code> <code class="ruby variable bold">@book</code><code class="ruby plain">.</code><code class="ruby keyword">nil</code><code class="ruby plain">?</code></div><div class="line number8 index7 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">redirect_to action: </code><code class="ruby color2">:index</code></div><div class="line number9 index8 alt2"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">end</code></div><div class="line number10 index9 alt1"><code class="ruby keyword">end</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<p>With this code, the browser will make a fresh request for the index page, the code in the <code>index</code> method will run, and all will be well.</p><p>The only downside to this code is that it requires a round trip to the browser: the browser requested the show action with <code>/books/1</code> and the controller finds that there are no books, so the controller sends out a 302 redirect response to the browser telling it to go to <code>/books/</code>, the browser complies and sends a new request back to the controller asking now for the <code>index</code> action, the controller then gets all the books in the database and renders the index template, sending it back down to the browser which then shows it on your screen.</p><p>While in a small application, this added latency might not be a problem, it is something to think about if response time is a concern. We can demonstrate one way to handle this with a contrived example:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  ruby">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby keyword">def</code> <code class="ruby plain">index</code></div><div class="line number2 index1 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby variable bold">@books</code> <code class="ruby plain">= Book.all</code></div><div class="line number3 index2 alt2"><code class="ruby keyword">end</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="ruby keyword">def</code> <code class="ruby plain">show</code></div><div class="line number6 index5 alt1"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby variable bold">@book</code> <code class="ruby plain">= Book.find_by(id: params[</code><code class="ruby color2">:id</code><code class="ruby plain">])</code></div><div class="line number7 index6 alt2"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">if</code> <code class="ruby variable bold">@book</code><code class="ruby plain">.</code><code class="ruby keyword">nil</code><code class="ruby plain">?</code></div><div class="line number8 index7 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby variable bold">@books</code> <code class="ruby plain">= Book.all</code></div><div class="line number9 index8 alt2"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">flash.now[</code><code class="ruby color2">:alert</code><code class="ruby plain">] = </code><code class="ruby string">"Your book was not found"</code></div><div class="line number10 index9 alt1"><code class="ruby spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">render </code><code class="ruby string">"index"</code></div><div class="line number11 index10 alt2"><code class="ruby spaces">&nbsp;&nbsp;</code><code class="ruby keyword">end</code></div><div class="line number12 index11 alt1"><code class="ruby keyword">end</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<p>This would detect that there are no books with the specified ID, populate the <code>@books</code> instance variable with all the books in the model, and then directly render the <code>index.html.erb</code> template, returning it to the browser with a flash alert message to tell the user what happened.</p><h4 id="using-head-to-build-header-only-responses">2.4 Using <code>head</code> To Build Header-Only Responses</h4><p>The <code>head</code> method can be used to send responses with only headers to the browser. The <code>head</code> method accepts a number or symbol (see <a href="http://guides.rubyonrails.org/layouts_and_rendering.html#the-status-option">reference table</a>) representing an HTTP status code. The options argument is interpreted as a hash of header names and values. For example, you can return only an error header:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  ruby">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">head </code><code class="ruby color2">:bad_request</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<p>This would produce the following header:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  plain">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="plain plain">HTTP/1.1 400 Bad Request</code></div><div class="line number2 index1 alt1"><code class="plain plain">Connection: close</code></div><div class="line number3 index2 alt2"><code class="plain plain">Date: Sun, 24 Jan 2010 12:15:53 GMT</code></div><div class="line number4 index3 alt1"><code class="plain plain">Transfer-Encoding: chunked</code></div><div class="line number5 index4 alt2"><code class="plain plain">Content-Type: text/html; charset=utf-8</code></div><div class="line number6 index5 alt1"><code class="plain plain">X-Runtime: 0.013483</code></div><div class="line number7 index6 alt2"><code class="plain plain">Set-Cookie: _blog_session=...snip...; path=/; HttpOnly</code></div><div class="line number8 index7 alt1"><code class="plain plain">Cache-Control: no-cache</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<p>Or you can use other HTTP headers to convey other information:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  ruby">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">head </code><code class="ruby color2">:created</code><code class="ruby plain">, location: photo_path(</code><code class="ruby variable bold">@photo</code><code class="ruby plain">)</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<p>Which would produce:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  plain">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="plain plain">HTTP/1.1 201 Created</code></div><div class="line number2 index1 alt1"><code class="plain plain">Connection: close</code></div><div class="line number3 index2 alt2"><code class="plain plain">Date: Sun, 24 Jan 2010 12:16:44 GMT</code></div><div class="line number4 index3 alt1"><code class="plain plain">Transfer-Encoding: chunked</code></div><div class="line number5 index4 alt2"><code class="plain plain">Location: /photos/1</code></div><div class="line number6 index5 alt1"><code class="plain plain">Content-Type: text/html; charset=utf-8</code></div><div class="line number7 index6 alt2"><code class="plain plain">X-Runtime: 0.083496</code></div><div class="line number8 index7 alt1"><code class="plain plain">Set-Cookie: _blog_session=...snip...; path=/; HttpOnly</code></div><div class="line number9 index8 alt2"><code class="plain plain">Cache-Control: no-cache</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<h3 id="structuring-layouts">3 Structuring Layouts</h3><p>When Rails renders a view as a response, it does so by combining the view with the current layout, using the rules for finding the current layout that were covered earlier in this guide. Within a layout, you have access to three tools for combining different bits of output to form the overall response:</p>
<ul>
<li>Asset tags</li>
<li>
<code>yield</code> and <code>content_for</code>
</li>
<li>Partials</li>
</ul>
<h4 id="asset-tag-helpers">3.1 Asset Tag Helpers</h4><p>Asset tag helpers provide methods for generating HTML that link views to feeds, JavaScript, stylesheets, images, videos and audios. There are six asset tag helpers available in Rails:</p>
<ul>
<li><code>auto_discovery_link_tag</code></li>
<li><code>javascript_include_tag</code></li>
<li><code>stylesheet_link_tag</code></li>
<li><code>image_tag</code></li>
<li><code>video_tag</code></li>
<li><code>audio_tag</code></li>
</ul>
<p>You can use these tags in layouts or other views, although the <code>auto_discovery_link_tag</code>, <code>javascript_include_tag</code>, and <code>stylesheet_link_tag</code>, are most commonly used in the <code>&lt;head&gt;</code> section of a layout.</p><div class="warning"><p>The asset tag helpers do <em>not</em> verify the existence of the assets at the specified locations; they simply assume that you know what you're doing and generate the link.</p></div><h5 id="linking-to-feeds-with-the-auto-discovery-link-tag">3.1.1 Linking to Feeds with the <code>auto_discovery_link_tag</code>
</h5><p>The <code>auto_discovery_link_tag</code> helper builds HTML that most browsers and feed readers can use to detect the presence of RSS or Atom feeds. It takes the type of the link (<code>:rss</code> or <code>:atom</code>), a hash of options that are passed through to url_for, and a hash of options for the tag:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  htmlscript">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby script">&lt;%=</code> <code class="ruby plain">auto_discovery_link_tag(</code><code class="ruby color2">:rss</code><code class="ruby plain">, {action: </code><code class="ruby string">"feed"</code><code class="ruby plain">},</code></div><div class="line number2 index1 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;</code><code class="ruby plain">{title: </code><code class="ruby string">"RSS Feed"</code><code class="ruby plain">}) </code><code class="ruby script">%&gt;</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<p>There are three tag options available for the <code>auto_discovery_link_tag</code>:</p>
<ul>
<li>
<code>:rel</code> specifies the <code>rel</code> value in the link. The default value is "alternate".</li>
<li>
<code>:type</code> specifies an explicit MIME type. Rails will generate an appropriate MIME type automatically.</li>
<li>
<code>:title</code> specifies the title of the link. The default value is the uppercase <code>:type</code> value, for example, "ATOM" or "RSS".</li>
</ul>
<h5 id="linking-to-javascript-files-with-the-javascript-include-tag">3.1.2 Linking to JavaScript Files with the <code>javascript_include_tag</code>
</h5><p>The <code>javascript_include_tag</code> helper returns an HTML <code>script</code> tag for each source provided.</p><p>If you are using Rails with the <a href="http://guides.rubyonrails.org/asset_pipeline.html">Asset Pipeline</a> enabled, this helper will generate a link to <code>/assets/javascripts/</code> rather than <code>public/javascripts</code> which was used in earlier versions of Rails. This link is then served by the asset pipeline.</p><p>A JavaScript file within a Rails application or Rails engine goes in one of three locations: <code>app/assets</code>, <code>lib/assets</code> or <code>vendor/assets</code>. These locations are explained in detail in the <a href="http://guides.rubyonrails.org/asset_pipeline.html#asset-organization">Asset Organization section in the Asset Pipeline Guide</a>.</p><p>You can specify a full path relative to the document root, or a URL, if you prefer. For example, to link to a JavaScript file that is inside a directory called <code>javascripts</code> inside of one of <code>app/assets</code>, <code>lib/assets</code> or <code>vendor/assets</code>, you would do this:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  htmlscript">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby script">&lt;%=</code> <code class="ruby plain">javascript_include_tag </code><code class="ruby string">"main"</code> <code class="ruby script">%&gt;</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<p>Rails will then output a <code>script</code> tag such as this:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  xml">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="xml plain">&lt;</code><code class="xml keyword">script</code> <code class="xml color1">src</code><code class="xml plain">=</code><code class="xml string">'/assets/main.js'</code><code class="xml plain">&gt;&lt;/</code><code class="xml keyword">script</code><code class="xml plain">&gt;</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<p>The request to this asset is then served by the Sprockets gem.</p><p>To include multiple files such as <code>app/assets/javascripts/main.js</code> and <code>app/assets/javascripts/columns.js</code> at the same time:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  htmlscript">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby script">&lt;%=</code> <code class="ruby plain">javascript_include_tag </code><code class="ruby string">"main"</code><code class="ruby plain">, </code><code class="ruby string">"columns"</code> <code class="ruby script">%&gt;</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<p>To include <code>app/assets/javascripts/main.js</code> and <code>app/assets/javascripts/photos/columns.js</code>:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  htmlscript">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby script">&lt;%=</code> <code class="ruby plain">javascript_include_tag </code><code class="ruby string">"main"</code><code class="ruby plain">, </code><code class="ruby string">"/photos/columns"</code> <code class="ruby script">%&gt;</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<p>To include <code>http://example.com/main.js</code>:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  htmlscript">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby script">&lt;%=</code> <code class="ruby plain">javascript_include_tag </code><code class="ruby string">"http://example.com/main.js"</code> <code class="ruby script">%&gt;</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<h5 id="linking-to-css-files-with-the-stylesheet-link-tag">3.1.3 Linking to CSS Files with the <code>stylesheet_link_tag</code>
</h5><p>The <code>stylesheet_link_tag</code> helper returns an HTML <code>&lt;link&gt;</code> tag for each source provided.</p><p>If you are using Rails with the "Asset Pipeline" enabled, this helper will generate a link to <code>/assets/stylesheets/</code>. This link is then processed by the Sprockets gem. A stylesheet file can be stored in one of three locations: <code>app/assets</code>, <code>lib/assets</code> or <code>vendor/assets</code>.</p><p>You can specify a full path relative to the document root, or a URL. For example, to link to a stylesheet file that is inside a directory called <code>stylesheets</code> inside of one of <code>app/assets</code>, <code>lib/assets</code> or <code>vendor/assets</code>, you would do this:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  htmlscript">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby script">&lt;%=</code> <code class="ruby plain">stylesheet_link_tag </code><code class="ruby string">"main"</code> <code class="ruby script">%&gt;</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<p>To include <code>app/assets/stylesheets/main.css</code> and <code>app/assets/stylesheets/columns.css</code>:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  htmlscript">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby script">&lt;%=</code> <code class="ruby plain">stylesheet_link_tag </code><code class="ruby string">"main"</code><code class="ruby plain">, </code><code class="ruby string">"columns"</code> <code class="ruby script">%&gt;</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<p>To include <code>app/assets/stylesheets/main.css</code> and <code>app/assets/stylesheets/photos/columns.css</code>:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  htmlscript">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby script">&lt;%=</code> <code class="ruby plain">stylesheet_link_tag </code><code class="ruby string">"main"</code><code class="ruby plain">, </code><code class="ruby string">"photos/columns"</code> <code class="ruby script">%&gt;</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<p>To include <code>http://example.com/main.css</code>:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  htmlscript">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby script">&lt;%=</code> <code class="ruby plain">stylesheet_link_tag </code><code class="ruby string">"http://example.com/main.css"</code> <code class="ruby script">%&gt;</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<p>By default, the <code>stylesheet_link_tag</code> creates links with <code>media="screen" rel="stylesheet"</code>. You can override any of these defaults by specifying an appropriate option (<code>:media</code>, <code>:rel</code>):</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  htmlscript">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby script">&lt;%=</code> <code class="ruby plain">stylesheet_link_tag </code><code class="ruby string">"main_print"</code><code class="ruby plain">, media: </code><code class="ruby string">"print"</code> <code class="ruby script">%&gt;</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<h5 id="linking-to-images-with-the-image-tag">3.1.4 Linking to Images with the <code>image_tag</code>
</h5><p>The <code>image_tag</code> helper builds an HTML <code>&lt;img /&gt;</code> tag to the specified file. By default, files are loaded from <code>public/images</code>.</p><div class="warning"><p>Note that you must specify the extension of the image.</p></div><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  htmlscript">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby script">&lt;%=</code> <code class="ruby plain">image_tag </code><code class="ruby string">"header.png"</code> <code class="ruby script">%&gt;</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<p>You can supply a path to the image if you like:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  htmlscript">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby script">&lt;%=</code> <code class="ruby plain">image_tag </code><code class="ruby string">"icons/delete.gif"</code> <code class="ruby script">%&gt;</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<p>You can supply a hash of additional HTML options:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  htmlscript">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby script">&lt;%=</code> <code class="ruby plain">image_tag </code><code class="ruby string">"icons/delete.gif"</code><code class="ruby plain">, {height: </code><code class="ruby constants">45</code><code class="ruby plain">} </code><code class="ruby script">%&gt;</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<p>You can supply alternate text for the image which will be used if the user has images turned off in their browser. If you do not specify an alt text explicitly, it defaults to the file name of the file, capitalized and with no extension. For example, these two image tags would return the same code:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  htmlscript">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby script">&lt;%=</code> <code class="ruby plain">image_tag </code><code class="ruby string">"home.gif"</code> <code class="ruby script">%&gt;</code></div><div class="line number2 index1 alt1"><code class="ruby script">&lt;%=</code> <code class="ruby plain">image_tag </code><code class="ruby string">"home.gif"</code><code class="ruby plain">, alt: </code><code class="ruby string">"Home"</code> <code class="ruby script">%&gt;</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<p>You can also specify a special size tag, in the format "{width}x{height}":</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  htmlscript">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby script">&lt;%=</code> <code class="ruby plain">image_tag </code><code class="ruby string">"home.gif"</code><code class="ruby plain">, size: </code><code class="ruby string">"50x20"</code> <code class="ruby script">%&gt;</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<p>In addition to the above special tags, you can supply a final hash of standard HTML options, such as <code>:class</code>, <code>:id</code> or <code>:name</code>:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  htmlscript">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby script">&lt;%=</code> <code class="ruby plain">image_tag </code><code class="ruby string">"home.gif"</code><code class="ruby plain">, alt: </code><code class="ruby string">"Go Home"</code><code class="ruby plain">,</code></div><div class="line number2 index1 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">id: </code><code class="ruby string">"HomeImage"</code><code class="ruby plain">,</code></div><div class="line number3 index2 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby keyword">class</code><code class="ruby plain">: </code><code class="ruby string">"nav_bar"</code> <code class="ruby script">%&gt;</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<h5 id="linking-to-videos-with-the-video-tag">3.1.5 Linking to Videos with the <code>video_tag</code>
</h5><p>The <code>video_tag</code> helper builds an HTML 5 <code>&lt;video&gt;</code> tag to the specified file. By default, files are loaded from <code>public/videos</code>.</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  htmlscript">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby script">&lt;%=</code> <code class="ruby plain">video_tag </code><code class="ruby string">"movie.ogg"</code> <code class="ruby script">%&gt;</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<p>Produces</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  htmlscript">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">video</code> <code class="htmlscript color1">src</code><code class="htmlscript plain">=</code><code class="htmlscript string">"/videos/movie.ogg"</code> <code class="htmlscript plain">/&gt;</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<p>Like an <code>image_tag</code> you can supply a path, either absolute, or relative to the <code>public/videos</code> directory. Additionally you can specify the <code>size: "#{width}x#{height}"</code> option just like an <code>image_tag</code>. Video tags can also have any of the HTML options specified at the end (<code>id</code>, <code>class</code> et al).</p><p>The video tag also supports all of the <code>&lt;video&gt;</code> HTML options through the HTML options hash, including:</p>
<ul>
<li>
<code>poster: "image_name.png"</code>, provides an image to put in place of the video before it starts playing.</li>
<li>
<code>autoplay: true</code>, starts playing the video on page load.</li>
<li>
<code>loop: true</code>, loops the video once it gets to the end.</li>
<li>
<code>controls: true</code>, provides browser supplied controls for the user to interact with the video.</li>
<li>
<code>autobuffer: true</code>, the video will pre load the file for the user on page load.</li>
</ul>
<p>You can also specify multiple videos to play by passing an array of videos to the <code>video_tag</code>:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  htmlscript">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby script">&lt;%=</code> <code class="ruby plain">video_tag [</code><code class="ruby string">"trailer.ogg"</code><code class="ruby plain">, </code><code class="ruby string">"movie.ogg"</code><code class="ruby plain">] </code><code class="ruby script">%&gt;</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<p>This will produce:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  htmlscript">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">video</code><code class="htmlscript plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">source</code> <code class="htmlscript color1">src</code><code class="htmlscript plain">=</code><code class="htmlscript string">"/videos/trailer.ogg"</code><code class="htmlscript plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">source</code> <code class="htmlscript color1">src</code><code class="htmlscript plain">=</code><code class="htmlscript string">"/videos/movie.ogg"</code><code class="htmlscript plain">&gt;</code></div><div class="line number4 index3 alt1"><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">video</code><code class="htmlscript plain">&gt;</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<h5 id="linking-to-audio-files-with-the-audio-tag">3.1.6 Linking to Audio Files with the <code>audio_tag</code>
</h5><p>The <code>audio_tag</code> helper builds an HTML 5 <code>&lt;audio&gt;</code> tag to the specified file. By default, files are loaded from <code>public/audios</code>.</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  htmlscript">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby script">&lt;%=</code> <code class="ruby plain">audio_tag </code><code class="ruby string">"music.mp3"</code> <code class="ruby script">%&gt;</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<p>You can supply a path to the audio file if you like:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  htmlscript">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby script">&lt;%=</code> <code class="ruby plain">audio_tag </code><code class="ruby string">"music/first_song.mp3"</code> <code class="ruby script">%&gt;</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<p>You can also supply a hash of additional options, such as <code>:id</code>, <code>:class</code> etc.</p><p>Like the <code>video_tag</code>, the <code>audio_tag</code> has special options:</p>
<ul>
<li>
<code>autoplay: true</code>, starts playing the audio on page load</li>
<li>
<code>controls: true</code>, provides browser supplied controls for the user to interact with the audio.</li>
<li>
<code>autobuffer: true</code>, the audio will pre load the file for the user on page load.</li>
</ul>
<h4 id="understanding-yield">3.2 Understanding <code>yield</code>
</h4><p>Within the context of a layout, <code>yield</code> identifies a section where content from the view should be inserted. The simplest way to use this is to have a single <code>yield</code>, into which the entire contents of the view currently being rendered is inserted:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  htmlscript">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">html</code><code class="htmlscript plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">head</code><code class="htmlscript plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">head</code><code class="htmlscript plain">&gt;</code></div><div class="line number4 index3 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">body</code><code class="ruby plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;</code><code class="ruby script">&lt;%=</code> <code class="ruby keyword">yield</code> <code class="ruby script">%&gt;</code></div><div class="line number6 index5 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">body</code><code class="htmlscript plain">&gt;</code></div><div class="line number7 index6 alt2"><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">html</code><code class="htmlscript plain">&gt;</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<p>You can also create a layout with multiple yielding regions:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  htmlscript">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">html</code><code class="htmlscript plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">head</code><code class="ruby plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;</code><code class="ruby script">&lt;%=</code> <code class="ruby keyword">yield</code> <code class="ruby color2">:head</code> <code class="ruby script">%&gt;</code></div><div class="line number4 index3 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">head</code><code class="htmlscript plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">body</code><code class="ruby plain">&gt;</code></div><div class="line number6 index5 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;</code><code class="ruby script">&lt;%=</code> <code class="ruby keyword">yield</code> <code class="ruby script">%&gt;</code></div><div class="line number7 index6 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">body</code><code class="htmlscript plain">&gt;</code></div><div class="line number8 index7 alt1"><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">html</code><code class="htmlscript plain">&gt;</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<p>The main body of the view will always render into the unnamed <code>yield</code>. To render content into a named <code>yield</code>, you use the <code>content_for</code> method.</p><h4 id="using-the-content-for-method">3.3 Using the <code>content_for</code> Method</h4><p>The <code>content_for</code> method allows you to insert content into a named <code>yield</code> block in your layout. For example, this view would work with the layout that you just saw:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  htmlscript">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby script">&lt;%</code> <code class="ruby plain">content_for </code><code class="ruby color2">:head</code> <code class="ruby keyword">do</code> <code class="ruby script">%&gt;</code></div><div class="line number2 index1 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">title</code><code class="htmlscript plain">&gt;A simple page&lt;/</code><code class="htmlscript keyword">title</code><code class="ruby plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="ruby script">&lt;%</code> <code class="ruby keyword">end</code> <code class="ruby script">%&gt;</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">p</code><code class="htmlscript plain">&gt;Hello, Rails!&lt;/</code><code class="htmlscript keyword">p</code><code class="htmlscript plain">&gt;</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<p>The result of rendering this page into the supplied layout would be this HTML:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  htmlscript">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">html</code><code class="htmlscript plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">head</code><code class="htmlscript plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">title</code><code class="htmlscript plain">&gt;A simple page&lt;/</code><code class="htmlscript keyword">title</code><code class="htmlscript plain">&gt;</code></div><div class="line number4 index3 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">head</code><code class="htmlscript plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">body</code><code class="htmlscript plain">&gt;</code></div><div class="line number6 index5 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">p</code><code class="htmlscript plain">&gt;Hello, Rails!&lt;/</code><code class="htmlscript keyword">p</code><code class="htmlscript plain">&gt;</code></div><div class="line number7 index6 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">body</code><code class="htmlscript plain">&gt;</code></div><div class="line number8 index7 alt1"><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">html</code><code class="htmlscript plain">&gt;</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<p>The <code>content_for</code> method is very helpful when your layout contains distinct regions such as sidebars and footers that should get their own blocks of content inserted. It's also useful for inserting tags that load page-specific JavaScript or css files into the header of an otherwise generic layout.</p><h4 id="using-partials">3.4 Using Partials</h4><p>Partial templates - usually just called "partials" - are another device for breaking the rendering process into more manageable chunks. With a partial, you can move the code for rendering a particular piece of a response to its own file.</p><h5 id="naming-partials">3.4.1 Naming Partials</h5><p>To render a partial as part of a view, you use the <code>render</code> method within the view:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  ruby">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">&lt;%= render </code><code class="ruby string">"menu"</code> <code class="ruby plain">%&gt;</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<p>This will render a file named <code>_menu.html.erb</code> at that point within the view being rendered. Note the leading underscore character: partials are named with a leading underscore to distinguish them from regular views, even though they are referred to without the underscore. This holds true even when you're pulling in a partial from another folder:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  ruby">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby plain">&lt;%= render </code><code class="ruby string">"shared/menu"</code> <code class="ruby plain">%&gt;</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<p>That code will pull in the partial from <code>app/views/shared/_menu.html.erb</code>.</p><h5 id="using-partials-to-simplify-views">3.4.2 Using Partials to Simplify Views</h5><p>One way to use partials is to treat them as the equivalent of subroutines: as a way to move details out of a view so that you can grasp what's going on more easily. For example, you might have a view that looked like this:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  htmlscript">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby script">&lt;%=</code> <code class="ruby plain">render </code><code class="ruby string">"shared/ad_banner"</code> <code class="ruby script">%&gt;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">h1</code><code class="htmlscript plain">&gt;Products&lt;/</code><code class="htmlscript keyword">h1</code><code class="htmlscript plain">&gt;</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">p</code><code class="htmlscript plain">&gt;Here are a few of our fine products:&lt;/</code><code class="htmlscript keyword">p</code><code class="ruby plain">&gt;</code></div><div class="line number6 index5 alt1"><code class="ruby plain">...</code></div><div class="line number7 index6 alt2">&nbsp;</div><div class="line number8 index7 alt1"><code class="ruby script">&lt;%=</code> <code class="ruby plain">render </code><code class="ruby string">"shared/footer"</code> <code class="ruby script">%&gt;</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<p>Here, the <code>_ad_banner.html.erb</code> and <code>_footer.html.erb</code> partials could contain
content that is shared by many pages in your application. You don't need to see
the details of these sections when you're concentrating on a particular page.</p><p>As seen in the previous sections of this guide, <code>yield</code> is a very powerful tool
for cleaning up your layouts. Keep in mind that it's pure Ruby, so you can use
it almost everywhere. For example, we can use it to DRY up form layout
definitions for several similar resources:</p>
<ul>
<li>
<p><code>users/index.html.erb</code></p>
<div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  htmlscript">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby script">&lt;%=</code> <code class="ruby plain">render </code><code class="ruby string">"shared/search_filters"</code><code class="ruby plain">, search: </code><code class="ruby variable bold">@q</code> <code class="ruby keyword">do</code> <code class="ruby plain">|f| </code><code class="ruby script">%&gt;</code></div><div class="line number2 index1 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">p</code><code class="ruby plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">Name contains: </code><code class="ruby script">&lt;%=</code> <code class="ruby plain">f.text_field </code><code class="ruby color2">:name_contains</code> <code class="ruby script">%&gt;</code></div><div class="line number4 index3 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">p</code><code class="ruby plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="ruby script">&lt;%</code> <code class="ruby keyword">end</code> <code class="ruby script">%&gt;</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
</li>
<li>
<p><code>roles/index.html.erb</code></p>
<div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  htmlscript">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby script">&lt;%=</code> <code class="ruby plain">render </code><code class="ruby string">"shared/search_filters"</code><code class="ruby plain">, search: </code><code class="ruby variable bold">@q</code> <code class="ruby keyword">do</code> <code class="ruby plain">|f| </code><code class="ruby script">%&gt;</code></div><div class="line number2 index1 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">p</code><code class="ruby plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">Title contains: </code><code class="ruby script">&lt;%=</code> <code class="ruby plain">f.text_field </code><code class="ruby color2">:title_contains</code> <code class="ruby script">%&gt;</code></div><div class="line number4 index3 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">p</code><code class="ruby plain">&gt;</code></div><div class="line number5 index4 alt2"><code class="ruby script">&lt;%</code> <code class="ruby keyword">end</code> <code class="ruby script">%&gt;</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
</li>
<li>
<p><code>shared/_search_filters.html.erb</code></p>
<div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  htmlscript">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby script">&lt;%=</code> <code class="ruby plain">form_for(</code><code class="ruby variable bold">@q</code><code class="ruby plain">) </code><code class="ruby keyword">do</code> <code class="ruby plain">|f| </code><code class="ruby script">%&gt;</code></div><div class="line number2 index1 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">h1</code><code class="htmlscript plain">&gt;Search form:&lt;/</code><code class="htmlscript keyword">h1</code><code class="htmlscript plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">fieldset</code><code class="ruby plain">&gt;</code></div><div class="line number4 index3 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby script">&lt;%=</code> <code class="ruby keyword">yield</code> <code class="ruby plain">f </code><code class="ruby script">%&gt;</code></div><div class="line number5 index4 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">fieldset</code><code class="htmlscript plain">&gt;</code></div><div class="line number6 index5 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">p</code><code class="ruby plain">&gt;</code></div><div class="line number7 index6 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby script">&lt;%=</code> <code class="ruby plain">f.submit </code><code class="ruby string">"Search"</code> <code class="ruby script">%&gt;</code></div><div class="line number8 index7 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">p</code><code class="ruby plain">&gt;</code></div><div class="line number9 index8 alt2"><code class="ruby script">&lt;%</code> <code class="ruby keyword">end</code> <code class="ruby script">%&gt;</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
</li>
</ul>
<div class="info"><p>For content that is shared among all pages in your application, you can use partials directly from layouts.</p></div><h5 id="partial-layouts">3.4.3 Partial Layouts</h5><p>A partial can use its own layout file, just as a view can use a layout. For example, you might call a partial like this:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  htmlscript">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby script">&lt;%=</code> <code class="ruby plain">render partial: </code><code class="ruby string">"link_area"</code><code class="ruby plain">, layout: </code><code class="ruby string">"graybar"</code> <code class="ruby script">%&gt;</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<p>This would look for a partial named <code>_link_area.html.erb</code> and render it using the layout <code>_graybar.html.erb</code>. Note that layouts for partials follow the same leading-underscore naming as regular partials, and are placed in the same folder with the partial that they belong to (not in the master <code>layouts</code> folder).</p><p>Also note that explicitly specifying <code>:partial</code> is required when passing additional options such as <code>:layout</code>.</p><h5 id="passing-local-variables">3.4.4 Passing Local Variables</h5><p>You can also pass local variables into partials, making them even more powerful and flexible. For example, you can use this technique to reduce duplication between new and edit pages, while still keeping a bit of distinct content:</p>
<ul>
<li>
<p><code>new.html.erb</code></p>
<div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  htmlscript">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">h1</code><code class="htmlscript plain">&gt;New zone&lt;/</code><code class="htmlscript keyword">h1</code><code class="ruby plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="ruby script">&lt;%=</code> <code class="ruby plain">render partial: </code><code class="ruby string">"form"</code><code class="ruby plain">, locals: {zone: </code><code class="ruby variable bold">@zone</code><code class="ruby plain">} </code><code class="ruby script">%&gt;</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
</li>
<li>
<p><code>edit.html.erb</code></p>
<div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  htmlscript">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">h1</code><code class="htmlscript plain">&gt;Editing zone&lt;/</code><code class="htmlscript keyword">h1</code><code class="ruby plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="ruby script">&lt;%=</code> <code class="ruby plain">render partial: </code><code class="ruby string">"form"</code><code class="ruby plain">, locals: {zone: </code><code class="ruby variable bold">@zone</code><code class="ruby plain">} </code><code class="ruby script">%&gt;</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
</li>
<li>
<p><code>_form.html.erb</code></p>
<div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  htmlscript">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby script">&lt;%=</code> <code class="ruby plain">form_for(zone) </code><code class="ruby keyword">do</code> <code class="ruby plain">|f| </code><code class="ruby script">%&gt;</code></div><div class="line number2 index1 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">p</code><code class="htmlscript plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">b</code><code class="htmlscript plain">&gt;Zone name&lt;/</code><code class="htmlscript keyword">b</code><code class="htmlscript plain">&gt;&lt;</code><code class="htmlscript keyword">br</code><code class="ruby plain">&gt;</code></div><div class="line number4 index3 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby script">&lt;%=</code> <code class="ruby plain">f.text_field </code><code class="ruby color2">:name</code> <code class="ruby script">%&gt;</code></div><div class="line number5 index4 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">p</code><code class="htmlscript plain">&gt;</code></div><div class="line number6 index5 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">p</code><code class="ruby plain">&gt;</code></div><div class="line number7 index6 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby script">&lt;%=</code> <code class="ruby plain">f.submit </code><code class="ruby script">%&gt;</code></div><div class="line number8 index7 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">p</code><code class="ruby plain">&gt;</code></div><div class="line number9 index8 alt2"><code class="ruby script">&lt;%</code> <code class="ruby keyword">end</code> <code class="ruby script">%&gt;</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
</li>
</ul>
<p>Although the same partial will be rendered into both views, Action View's submit helper will return "Create Zone" for the new action and "Update Zone" for the edit action.</p><p>To pass a local variable to a partial in only specific cases use the <code>local_assigns</code>.</p>
<ul>
<li><code>index.html.erb</code></li>
</ul>
<div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  htmlscript">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby script">&lt;%=</code> <code class="ruby plain">render user.articles </code><code class="ruby script">%&gt;</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>

<ul>
<li><code>show.html.erb</code></li>
</ul>
<div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  htmlscript">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby script">&lt;%=</code> <code class="ruby plain">render article, full: </code><code class="ruby keyword">true</code> <code class="ruby script">%&gt;</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>

<ul>
<li><code>_article.html.erb</code></li>
</ul>
<div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  htmlscript">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">h2</code><code class="ruby plain">&gt;</code><code class="ruby script">&lt;%=</code> <code class="ruby plain">article.title </code><code class="ruby script">%&gt;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">h2</code><code class="ruby plain">&gt;</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="ruby script">&lt;%</code> <code class="ruby keyword">if</code> <code class="ruby plain">local_assigns[</code><code class="ruby color2">:full</code><code class="ruby plain">] </code><code class="ruby script">%&gt;</code></div><div class="line number4 index3 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;</code><code class="ruby script">&lt;%=</code> <code class="ruby plain">simple_format article.body </code><code class="ruby script">%&gt;</code></div><div class="line number5 index4 alt2"><code class="ruby script">&lt;%</code> <code class="ruby keyword">else</code> <code class="ruby script">%&gt;</code></div><div class="line number6 index5 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;</code><code class="ruby script">&lt;%=</code> <code class="ruby plain">truncate article.body </code><code class="ruby script">%&gt;</code></div><div class="line number7 index6 alt2"><code class="ruby script">&lt;%</code> <code class="ruby keyword">end</code> <code class="ruby script">%&gt;</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<p>This way it is possible to use the partial without the need to declare all local variables.</p><p>Every partial also has a local variable with the same name as the partial (minus the underscore). You can pass an object in to this local variable via the <code>:object</code> option:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  htmlscript">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby script">&lt;%=</code> <code class="ruby plain">render partial: </code><code class="ruby string">"customer"</code><code class="ruby plain">, object: </code><code class="ruby variable bold">@new_customer</code> <code class="ruby script">%&gt;</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<p>Within the <code>customer</code> partial, the <code>customer</code> variable will refer to <code>@new_customer</code> from the parent view.</p><p>If you have an instance of a model to render into a partial, you can use a shorthand syntax:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  htmlscript">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby script">&lt;%=</code> <code class="ruby plain">render </code><code class="ruby variable bold">@customer</code> <code class="ruby script">%&gt;</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<p>Assuming that the <code>@customer</code> instance variable contains an instance of the <code>Customer</code> model, this will use <code>_customer.html.erb</code> to render it and will pass the local variable <code>customer</code> into the partial which will refer to the <code>@customer</code> instance variable in the parent view.</p><h5 id="rendering-collections">3.4.5 Rendering Collections</h5><p>Partials are very useful in rendering collections. When you pass a collection to a partial via the <code>:collection</code> option, the partial will be inserted once for each member in the collection:</p>
<ul>
<li>
<p><code>index.html.erb</code></p>
<div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  htmlscript">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">h1</code><code class="htmlscript plain">&gt;Products&lt;/</code><code class="htmlscript keyword">h1</code><code class="ruby plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="ruby script">&lt;%=</code> <code class="ruby plain">render partial: </code><code class="ruby string">"product"</code><code class="ruby plain">, collection: </code><code class="ruby variable bold">@products</code> <code class="ruby script">%&gt;</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
</li>
<li>
<p><code>_product.html.erb</code></p>
<div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  htmlscript">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">p</code><code class="ruby plain">&gt;Product Name: </code><code class="ruby script">&lt;%=</code> <code class="ruby plain">product.name </code><code class="ruby script">%&gt;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">p</code><code class="htmlscript plain">&gt;</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
</li>
</ul>
<p>When a partial is called with a pluralized collection, then the individual instances of the partial have access to the member of the collection being rendered via a variable named after the partial. In this case, the partial is <code>_product</code>, and within the <code>_product</code> partial, you can refer to <code>product</code> to get the instance that is being rendered.</p><p>There is also a shorthand for this. Assuming <code>@products</code> is a collection of <code>product</code> instances, you can simply write this in the <code>index.html.erb</code> to produce the same result:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  htmlscript">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">h1</code><code class="htmlscript plain">&gt;Products&lt;/</code><code class="htmlscript keyword">h1</code><code class="ruby plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="ruby script">&lt;%=</code> <code class="ruby plain">render </code><code class="ruby variable bold">@products</code> <code class="ruby script">%&gt;</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<p>Rails determines the name of the partial to use by looking at the model name in the collection. In fact, you can even create a heterogeneous collection and render it this way, and Rails will choose the proper partial for each member of the collection:</p>
<ul>
<li>
<p><code>index.html.erb</code></p>
<div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  htmlscript">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">h1</code><code class="htmlscript plain">&gt;Contacts&lt;/</code><code class="htmlscript keyword">h1</code><code class="ruby plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="ruby script">&lt;%=</code> <code class="ruby plain">render [customer1, employee1, customer2, employee2] </code><code class="ruby script">%&gt;</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
</li>
<li>
<p><code>customers/_customer.html.erb</code></p>
<div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  htmlscript">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">p</code><code class="ruby plain">&gt;Customer: </code><code class="ruby script">&lt;%=</code> <code class="ruby plain">customer.name </code><code class="ruby script">%&gt;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">p</code><code class="htmlscript plain">&gt;</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
</li>
<li>
<p><code>employees/_employee.html.erb</code></p>
<div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  htmlscript">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">p</code><code class="ruby plain">&gt;Employee: </code><code class="ruby script">&lt;%=</code> <code class="ruby plain">employee.name </code><code class="ruby script">%&gt;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">p</code><code class="htmlscript plain">&gt;</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
</li>
</ul>
<p>In this case, Rails will use the customer or employee partials as appropriate for each member of the collection.</p><p>In the event that the collection is empty, <code>render</code> will return nil, so it should be fairly simple to provide alternative content.</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  htmlscript">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">h1</code><code class="htmlscript plain">&gt;Products&lt;/</code><code class="htmlscript keyword">h1</code><code class="ruby plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="ruby script">&lt;%=</code> <code class="ruby plain">render(</code><code class="ruby variable bold">@products</code><code class="ruby plain">) || </code><code class="ruby string">"There are no products available."</code> <code class="ruby script">%&gt;</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<h5 id="local-variables">3.4.6 Local Variables</h5><p>To use a custom local variable name within the partial, specify the <code>:as</code> option in the call to the partial:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  htmlscript">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby script">&lt;%=</code> <code class="ruby plain">render partial: </code><code class="ruby string">"product"</code><code class="ruby plain">, collection: </code><code class="ruby variable bold">@products</code><code class="ruby plain">, as: </code><code class="ruby color2">:item</code> <code class="ruby script">%&gt;</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<p>With this change, you can access an instance of the <code>@products</code> collection as the <code>item</code> local variable within the partial.</p><p>You can also pass in arbitrary local variables to any partial you are rendering with the <code>locals: {}</code> option:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  htmlscript">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby script">&lt;%=</code> <code class="ruby plain">render partial: </code><code class="ruby string">"product"</code><code class="ruby plain">, collection: </code><code class="ruby variable bold">@products</code><code class="ruby plain">,</code></div><div class="line number2 index1 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="ruby plain">as: </code><code class="ruby color2">:item</code><code class="ruby plain">, locals: {title: </code><code class="ruby string">"Products Page"</code><code class="ruby plain">} </code><code class="ruby script">%&gt;</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<p>In this case, the partial will have access to a local variable <code>title</code> with the value "Products Page".</p><div class="info"><p>Rails also makes a counter variable available within a partial called by the collection, named after the member of the collection followed by <code>_counter</code>. For example, if you're rendering <code>@products</code>, within the partial you can refer to <code>product_counter</code> to tell you how many times the partial has been rendered. This does not work in conjunction with the <code>as: :value</code> option.</p></div><p>You can also specify a second partial to be rendered between instances of the main partial by using the <code>:spacer_template</code> option:</p><h5 id="spacer-templates">3.4.7 Spacer Templates</h5><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  htmlscript">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby script">&lt;%=</code> <code class="ruby plain">render partial: </code><code class="ruby variable bold">@products</code><code class="ruby plain">, spacer_template: </code><code class="ruby string">"product_ruler"</code> <code class="ruby script">%&gt;</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<p>Rails will render the <code>_product_ruler</code> partial (with no data passed in to it) between each pair of <code>_product</code> partials.</p><h5 id="collection-partial-layouts">3.4.8 Collection Partial Layouts</h5><p>When rendering collections it is also possible to use the <code>:layout</code> option:</p><div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  htmlscript">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby script">&lt;%=</code> <code class="ruby plain">render partial: </code><code class="ruby string">"product"</code><code class="ruby plain">, collection: </code><code class="ruby variable bold">@products</code><code class="ruby plain">, layout: </code><code class="ruby string">"special_layout"</code> <code class="ruby script">%&gt;</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<p>The layout will be rendered together with the partial for each item in the collection. The current object and object_counter variables will be available in the layout as well, the same way they do within the partial.</p><h4 id="using-nested-layouts">3.5 Using Nested Layouts</h4><p>You may find that your application requires a layout that differs slightly from your regular application layout to support one particular controller. Rather than repeating the main layout and editing it, you can accomplish this by using nested layouts (sometimes called sub-templates). Here's an example:</p><p>Suppose you have the following <code>ApplicationController</code> layout:</p>
<ul>
<li>
<p><code>app/views/layouts/application.html.erb</code></p>
<div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  htmlscript">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">html</code><code class="htmlscript plain">&gt;</code></div><div class="line number2 index1 alt1"><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">head</code><code class="htmlscript plain">&gt;</code></div><div class="line number3 index2 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">title</code><code class="ruby plain">&gt;</code><code class="ruby script">&lt;%=</code> <code class="ruby variable bold">@page_title</code> <code class="ruby keyword">or</code> <code class="ruby string">"Page Title"</code> <code class="ruby script">%&gt;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">title</code><code class="ruby plain">&gt;</code></div><div class="line number4 index3 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;</code><code class="ruby script">&lt;%=</code> <code class="ruby plain">stylesheet_link_tag </code><code class="ruby string">"layout"</code> <code class="ruby script">%&gt;</code></div><div class="line number5 index4 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">style</code><code class="ruby plain">&gt;</code><code class="ruby script">&lt;%=</code> <code class="ruby keyword">yield</code> <code class="ruby color2">:stylesheets</code> <code class="ruby script">%&gt;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">style</code><code class="htmlscript plain">&gt;</code></div><div class="line number6 index5 alt1"><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">head</code><code class="htmlscript plain">&gt;</code></div><div class="line number7 index6 alt2"><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">body</code><code class="htmlscript plain">&gt;</code></div><div class="line number8 index7 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">div</code> <code class="htmlscript color1">id</code><code class="htmlscript plain">=</code><code class="htmlscript string">"top_menu"</code><code class="htmlscript plain">&gt;Top menu items here&lt;/</code><code class="htmlscript keyword">div</code><code class="htmlscript plain">&gt;</code></div><div class="line number9 index8 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">div</code> <code class="htmlscript color1">id</code><code class="htmlscript plain">=</code><code class="htmlscript string">"menu"</code><code class="htmlscript plain">&gt;Menu items here&lt;/</code><code class="htmlscript keyword">div</code><code class="htmlscript plain">&gt;</code></div><div class="line number10 index9 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">div</code> <code class="htmlscript color1">id</code><code class="htmlscript plain">=</code><code class="htmlscript string">"content"</code><code class="ruby plain">&gt;</code><code class="ruby script">&lt;%=</code> <code class="ruby plain">content_for?(</code><code class="ruby color2">:content</code><code class="ruby plain">) ? </code><code class="ruby keyword">yield</code><code class="ruby plain">(</code><code class="ruby color2">:content</code><code class="ruby plain">) : </code><code class="ruby keyword">yield</code> <code class="ruby script">%&gt;</code><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">div</code><code class="htmlscript plain">&gt;</code></div><div class="line number11 index10 alt2"><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">body</code><code class="htmlscript plain">&gt;</code></div><div class="line number12 index11 alt1"><code class="htmlscript plain">&lt;/</code><code class="htmlscript keyword">html</code><code class="htmlscript plain">&gt;</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
</li>
</ul>
<p>On pages generated by <code>NewsController</code>, you want to hide the top menu and add a right menu:</p>
<ul>
<li>
<p><code>app/views/layouts/news.html.erb</code></p>
<div class="code_container">
<div>
      <div class="syntaxhighlighter nogutter  htmlscript ">
        <table border="0" cellpadding="0" cellspacing="0">
          
          <tbody>
            <tr>
              
              <td class="code">
                <div class="container"><div class="line number1 index0 alt2"><code class="ruby script">&lt;%</code> <code class="ruby plain">content_for </code><code class="ruby color2">:stylesheets</code> <code class="ruby keyword">do</code> <code class="ruby script">%&gt;</code></div><div class="line number2 index1 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;</code><code class="ruby plain">#top_menu {display: none}</code></div><div class="line number3 index2 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;</code><code class="ruby plain">#right_menu {float: right; background-color: yellow; color: black}</code></div><div class="line number4 index3 alt1"><code class="ruby script">&lt;%</code> <code class="ruby keyword">end</code> <code class="ruby script">%&gt;</code></div><div class="line number5 index4 alt2"><code class="ruby script">&lt;%</code> <code class="ruby plain">content_for </code><code class="ruby color2">:content</code> <code class="ruby keyword">do</code> <code class="ruby script">%&gt;</code></div><div class="line number6 index5 alt1"><code class="htmlscript spaces">&nbsp;&nbsp;</code><code class="htmlscript plain">&lt;</code><code class="htmlscript keyword">div</code> <code class="htmlscript color1">id</code><code class="htmlscript plain">=</code><code class="htmlscript string">"right_menu"</code><code class="htmlscript plain">&gt;Right menu items here&lt;/</code><code class="htmlscript keyword">div</code><code class="ruby plain">&gt;</code></div><div class="line number7 index6 alt2"><code class="htmlscript spaces">&nbsp;&nbsp;</code><code class="ruby script">&lt;%=</code> <code class="ruby plain">content_for?(</code><code class="ruby color2">:news_content</code><code class="ruby plain">) ? </code><code class="ruby keyword">yield</code><code class="ruby plain">(</code><code class="ruby color2">:news_content</code><code class="ruby plain">) : </code><code class="ruby keyword">yield</code> <code class="ruby script">%&gt;</code></div><div class="line number8 index7 alt1"><code class="ruby script">&lt;%</code> <code class="ruby keyword">end</code> <code class="ruby script">%&gt;</code></div><div class="line number9 index8 alt2"><code class="ruby script">&lt;%=</code> <code class="ruby plain">render template: </code><code class="ruby string">"layouts/application"</code> <code class="ruby script">%&gt;</code></div></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
</li>
</ul>
<p>That's it. The News views will use the new layout, hiding the top menu and adding a new right menu inside the "content" div.</p><p>There are several ways of getting similar results with different sub-templating schemes using this technique. Note that there is no limit in nesting levels. One can use the <code>ActionView::render</code> method via <code>render template: 'layouts/news'</code> to base a new layout on the News layout. If you are sure you will not subtemplate the <code>News</code> layout, you can replace the <code>content_for?(:news_content) ? yield(:news_content) : yield</code> with simply <code>yield</code>.</p>

        <h3>Feedback</h3>
        <p>
          You're encouraged to help improve the quality of this guide.
        </p>
        <p>
          Please contribute if you see any typos or factual errors.
          To get started, you can read our <a href="http://edgeguides.rubyonrails.org/contributing_to_ruby_on_rails.html#contributing-to-the-rails-documentation">documentation contributions</a> section.
        </p>
        <p>
          You may also find incomplete content, or stuff that is not up to date.
          Please do add any missing documentation for master. Make sure to check
          <a href="http://edgeguides.rubyonrails.org/">Edge Guides</a> first to verify
          if the issues are already fixed or not on the master branch.
          Check the <a href="http://guides.rubyonrails.org/ruby_on_rails_guides_guidelines.html">Ruby on Rails Guides Guidelines</a>
          for style and conventions.
        </p>
        <p>
          If for whatever reason you spot something to fix but cannot patch it yourself, please
          <a href="https://github.com/rails/rails/issues">open an issue</a>.
        </p>
        <p>And last but not least, any kind of discussion regarding Ruby on Rails
          documentation is very welcome in the <a href="http://groups.google.com/group/rubyonrails-docs">rubyonrails-docs mailing list</a>.
        </p>
      </div>
    </div>
  </div>

  <hr class="hide">
  <div id="footer">
    <div class="wrapper">
      <p>This work is licensed under a <a href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International</a> License</p>
<p>"Rails", "Ruby on Rails", and the Rails logo are trademarks of David Heinemeier Hansson. All rights reserved.</p>

    </div>
  </div>

  <script type="text/javascript" src="./Layouts and Rendering in Rails — Ruby on Rails Guides_files/jquery.min.js"></script>
  <script type="text/javascript" src="./Layouts and Rendering in Rails — Ruby on Rails Guides_files/responsive-tables.js"></script>
  <script type="text/javascript" src="./Layouts and Rendering in Rails — Ruby on Rails Guides_files/guides.js"></script>
  <script type="text/javascript" src="./Layouts and Rendering in Rails — Ruby on Rails Guides_files/syntaxhighlighter.js"></script>
  <script type="text/javascript">
    syntaxhighlighterConfig = {
      autoLinks: false,
    };
    $(guidesIndex.bind);
  </script>


<div id="feedly-mini" title="feedly Mini tookit"></div></body></html>