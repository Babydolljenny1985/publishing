.ui.following.bar.fixed.menu
  .uk-container
    #navbar.ui.large.secondary.network.menu
      -# TODO: I18n
      = link_to(image_tag("blue logo.png", alt: "EOL"), "/", class: "item uk-logo")
      = cms_menu.to_html
      = link_to("Education", "http://education.eol.org/", class: "item")
      .ui.simple.dropdown.item
        - langs = languages_hash
        - keys = langs.keys
        - keys.delete_at(keys.index(I18n.locale))
        - button_text = langs[I18n.locale] || "Language"
        = link_to(button_text, "#", class: "ui basic button", type: "button")
        .uk-list.uk-padding-small{ uk: { dropdown: true } }
          - keys.each do |key|
            -# NOTE the stupid check for test env here. Yuck.
            %li= link_to(langs[key], Rails.env.test? ? "/" : { lang: key })
      .right.menu
        #nav-search.item
          = form_tag(main_app.search_path, method: "get", autocomplete: "off", class: "uk-search uk-search-default") do |f|
            = text_field_tag("q", nil, class: "uk-search-input typeahead", placeholder: t("nav.search.placeholder"))
            %span.uk-search-icon-flip{ uk: { search: { icon: true } } }
        - if current_user
          .item= link_to(current_user.username, main_app.user_path(current_user))
          .item= link_to(t(:layout_sign_out), main_app.destroy_user_session_path)
        - else
          .item= link_to(t(:layout_sign_in), main_app.new_user_session_path)
          .item= link_to(t(:layout_sign_up), main_app.new_user_registration_path)
