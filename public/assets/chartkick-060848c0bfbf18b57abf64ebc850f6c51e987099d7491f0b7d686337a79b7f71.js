!function(e){"use strict";function t(e){return"[object Array]"===Object.prototype.toString.call(e)}function n(e){return e instanceof Function}function o(e){return!n(e)&&e instanceof Object}function r(e,n){var i;for(i in n)o(n[i])||t(n[i])?(o(n[i])&&!o(e[i])&&(e[i]={}),t(n[i])&&!t(e[i])&&(e[i]=[]),r(e[i],n[i])):void 0!==n[i]&&(e[i]=n[i])}function i(e,t){var n={};return r(n,e),r(n,t),n}function a(e){var t,n,o,r,i,a,s,u,l,c,d;return c=Object.prototype.toString.call(e),"[object Date]"===c?e:"[object String]"===c&&(o=e.match(_))?(d=parseInt(o[1],10),a=parseInt(o[3],10)-1,t=parseInt(o[5],10),n=parseInt(o[7],10),i=o[9]?parseInt(o[9],10):0,l=o[11]?parseInt(o[11],10):0,r=o[12]?1e3*parseFloat(H+o[12].slice(1)):0,u=Date.UTC(d,a,t,n,i,l,r),o[13]&&o[14]&&(s=60*o[15],o[17]&&(s+=parseInt(o[17],10)),s*="-"===o[14]?-1:1,u-=60*s*1e3),new Date(u)):void 0}function s(e){var t,n,o;for(t=0;t<e.length;t++)for(o=e[t].data,n=0;n<o.length;n++)if(o[n][1]<0)return!0;return!1}function u(e,t,n,o,r,a,u){return function(l,c,d){var p=i({},e);return p=i(p,d||{}),c.hideLegend&&t(p),"min"in c?n(p,c.min):s(l)||n(p,0),c.max&&o(p,c.max),c.stacked&&r(p),c.colors&&(p.colors=c.colors),c.xtitle&&a(p,c.xtitle),c.ytitle&&u(p,c.ytitle),p=i(p,c.library||{})}}function l(e,t){document.body.innerText?e.innerText=t:e.textContent=t}function c(e,t){l(e,"Error Loading Chart: "+t),e.style.color="#ff0000"}function d(t,n,o){var r=e.jQuery||e.Zepto||e.$;r.ajax({dataType:"json",url:n,success:o,error:function(e,n,o){var r="string"==typeof o?o:o.message;c(t,r)}})}function p(e,t){try{t(e)}catch(n){throw c(e.element,n.message),n}}function f(e,t){"string"==typeof e.dataSource?d(e.element,e.dataSource,function(n,o,r){e.data=n,p(e,t)}):(e.data=e.dataSource,p(e,t))}function h(e){return""+e}function m(e){return parseFloat(e)}function g(e){if("object"!=typeof e)if("number"==typeof e)e=new Date(1e3*e);else{var t=e.replace(/ /,"T").replace(" ","").replace("UTC","Z");e=a(t)||new Date(e)}return e}function y(e){if(!t(e)){var n,o=[];for(n in e)e.hasOwnProperty(n)&&o.push([n,e[n]]);e=o}return e}function v(e,t){return e[0].getTime()-t[0].getTime()}function b(e,t){var o,r,i,a;for(i="render"+e,a=t.options.adapter,o=0;o<O.length;o++)if(r=O[o],(!a||a===r.name)&&n(r[i]))return r[i](t);throw new Error("No adapter found")}function w(e,n,o){var r;for(!t(e)||"object"!=typeof e[0]||t(e[0])?(e=[{name:"Value",data:e}],n.hideLegend=!0):n.hideLegend=!1,n.discrete&&(o="string"),r=0;r<e.length;r++)e[r].data=P(y(e[r].data),o);return e}function j(e){var t,n=y(e);for(t=0;t<n.length;t++)n[t]=[h(n[t][0]),m(n[t][1])];return n}function x(e){var t;for(t=0;t<e.length;t++)e[t][1]=g(e[t][1]),e[t][2]=g(e[t][2]);return e}function C(e){e.data=w(e.data,e.options,"datetime"),b("LineChart",e)}function T(e){e.data=w(e.data,e.options,"string"),b("ColumnChart",e)}function k(e){e.data=j(e.data),b("PieChart",e)}function S(e){e.data=w(e.data,e.options,"string"),b("BarChart",e)}function E(e){e.data=w(e.data,e.options,"datetime"),b("AreaChart",e)}function A(e){e.data=j(e.data),b("GeoChart",e)}function N(e){e.data=w(e.data,e.options,"number"),b("ScatterChart",e)}function L(e){e.data=x(e.data),b("Timeline",e)}function q(e,t,n,o,r){"string"==typeof t&&(t=document.getElementById(t)),e.element=t,e.options=o||{},e.dataSource=n,D.charts[t.id]=e,f(e,r)}var D,_,H,R=e.Chartkick||{},O=[];if(_=/(\d\d\d\d)(\-)?(\d\d)(\-)?(\d\d)(T)?(\d\d)(:)?(\d\d)?(:)?(\d\d)?([\.,]\d+)?($|Z|([\+\-])(\d\d)(:)?(\d\d)?)/i,H=String(1.5).charAt(1),"Highcharts"in e){var F=new function(){var t=e.Highcharts;this.name="highcharts";var n={chart:{},xAxis:{title:{text:null},labels:{style:{fontSize:"12px"}}},yAxis:{title:{text:null},labels:{style:{fontSize:"12px"}}},title:{text:null},credits:{enabled:!1},legend:{borderWidth:0},tooltip:{style:{fontSize:"12px"}},plotOptions:{areaspline:{},series:{marker:{}}}},o=function(e){e.legend.enabled=!1},r=function(e,t){e.yAxis.min=t},a=function(e,t){e.yAxis.max=t},s=function(e){e.plotOptions.series.stacking="normal"},l=function(e,t){e.xAxis.title.text=t},c=function(e,t){e.yAxis.title.text=t},d=u(n,o,r,a,s,l,c);this.renderLineChart=function(e,n){n=n||"spline";var o={};"areaspline"===n&&(o={plotOptions:{areaspline:{stacking:"normal"},series:{marker:{enabled:!1}}}});var r,i,a,s=d(e.data,e.options,o);s.xAxis.type=e.options.discrete?"category":"datetime",s.chart.type=n,s.chart.renderTo=e.element.id;var u=e.data;for(i=0;i<u.length;i++){if(r=u[i].data,!e.options.discrete)for(a=0;a<r.length;a++)r[a][0]=r[a][0].getTime();u[i].marker={symbol:"circle"}}s.series=u,new t.Chart(s)},this.renderScatterChart=function(e){var n={},o=d(e.data,e.options,n);o.chart.type="scatter",o.chart.renderTo=e.element.id,o.series=e.data,new t.Chart(o)},this.renderPieChart=function(e){var o={};e.options.colors&&(o.colors=e.options.colors);var r=i(i(n,o),e.options.library||{});r.chart.renderTo=e.element.id,r.series=[{type:"pie",name:"Value",data:e.data}],new t.Chart(r)},this.renderColumnChart=function(e,n){var o,r,i,a,n=n||"column",s=e.data,u=d(s,e.options),l=[];for(u.chart.type=n,u.chart.renderTo=e.element.id,o=0;o<s.length;o++)for(i=s[o],r=0;r<i.data.length;r++)a=i.data[r],l[a[0]]||(l[a[0]]=new Array(s.length)),l[a[0]][o]=a[1];var c=[];for(o in l)l.hasOwnProperty(o)&&c.push(o);u.xAxis.categories=c;var p=[];for(o=0;o<s.length;o++){for(a=[],r=0;r<c.length;r++)a.push(l[c[r]][o]||0);p.push({name:s[o].name,data:a})}u.series=p,new t.Chart(u)};var p=this;this.renderBarChart=function(e){p.renderColumnChart(e,"bar")},this.renderAreaChart=function(e){p.renderLineChart(e,"areaspline")}};O.push(F)}if(e.google&&e.google.setOnLoadCallback){var I=new function(){var t=e.google;this.name="google";var n={},o=[],r=function(){for(var e,n,r=0;r<o.length;r++)e=o[r],n=t.visualization&&("corechart"===e.pack&&t.visualization.LineChart||"timeline"===e.pack&&t.visualization.Timeline),n&&(e.callback(),o.splice(r,1),r--)},a=function(e,i){if(i||(i=e,e="corechart"),o.push({pack:e,callback:i}),n[e])r();else{n[e]=!0;var a={packages:[e],callback:r};R.language&&(a.language=R.language),t.load("visualization","1",a)}},s={chartArea:{},fontName:"'Lucida Grande', 'Lucida Sans Unicode', Verdana, Arial, Helvetica, sans-serif",pointSize:6,legend:{textStyle:{fontSize:12,color:"#444"},alignment:"center",position:"right"},curveType:"function",hAxis:{textStyle:{color:"#666",fontSize:12},titleTextStyle:{},gridlines:{color:"transparent"},baselineColor:"#ccc",viewWindow:{}},vAxis:{textStyle:{color:"#666",fontSize:12},titleTextStyle:{},baselineColor:"#ccc",viewWindow:{}},tooltip:{textStyle:{color:"#666",fontSize:12}}},l=function(e){e.legend.position="none"},c=function(e,t){e.vAxis.viewWindow.min=t},d=function(e,t){e.vAxis.viewWindow.max=t},p=function(e,t){e.hAxis.viewWindow.min=t},f=function(e,t){e.hAxis.viewWindow.max=t},h=function(e){e.isStacked=!0},g=function(e,t){e.hAxis.title=t,e.hAxis.titleTextStyle.italic=!1},y=function(e,t){e.vAxis.title=t,e.vAxis.titleTextStyle.italic=!1},b=u(s,l,c,d,h,g,y),w=function(e,n){var o=new t.visualization.DataTable;o.addColumn(n,"");var r,i,a,s,u,l=[];for(r=0;r<e.length;r++)for(a=e[r],o.addColumn("number",a.name),i=0;i<a.data.length;i++)s=a.data[i],u="datetime"===n?s[0].getTime():s[0],l[u]||(l[u]=new Array(e.length)),l[u][r]=m(s[1]);var c,d=[];for(r in l)l.hasOwnProperty(r)&&(c="datetime"===n?new Date(m(r)):"number"===n?m(r):r,d.push([c].concat(l[r])));return"datetime"===n&&d.sort(v),o.addRows(d),o},j=function(t){e.attachEvent?e.attachEvent("onresize",t):e.addEventListener&&e.addEventListener("resize",t,!0),t()};this.renderLineChart=function(e){a(function(){var n=b(e.data,e.options),o=w(e.data,e.options.discrete?"string":"datetime");e.chart=new t.visualization.LineChart(e.element),j(function(){e.chart.draw(o,n)})})},this.renderPieChart=function(e){a(function(){var n={chartArea:{top:"10%",height:"80%"}};e.options.colors&&(n.colors=e.options.colors);var o=i(i(s,n),e.options.library||{}),r=new t.visualization.DataTable;r.addColumn("string",""),r.addColumn("number","Value"),r.addRows(e.data),e.chart=new t.visualization.PieChart(e.element),j(function(){e.chart.draw(r,o)})})},this.renderColumnChart=function(e){a(function(){var n=b(e.data,e.options),o=w(e.data,"string");e.chart=new t.visualization.ColumnChart(e.element),j(function(){e.chart.draw(o,n)})})},this.renderBarChart=function(e){a(function(){var n={hAxis:{gridlines:{color:"#ccc"}}},o=u(s,l,p,f,h)(e.data,e.options,n),r=w(e.data,"string");e.chart=new t.visualization.BarChart(e.element),j(function(){e.chart.draw(r,o)})})},this.renderAreaChart=function(e){a(function(){var n={isStacked:!0,pointSize:0,areaOpacity:.5},o=b(e.data,e.options,n),r=w(e.data,e.options.discrete?"string":"datetime");e.chart=new t.visualization.AreaChart(e.element),j(function(){e.chart.draw(r,o)})})},this.renderGeoChart=function(e){a(function(){var n={legend:"none",colorAxis:{colors:e.options.colors||["#f6c7b6","#ce502d"]}},o=i(i(s,n),e.options.library||{}),r=new t.visualization.DataTable;r.addColumn("string",""),r.addColumn("number","Value"),r.addRows(e.data),e.chart=new t.visualization.GeoChart(e.element),j(function(){e.chart.draw(r,o)})})},this.renderScatterChart=function(e){a(function(){var n={},o=b(e.data,e.options,n),r=w(e.data,"number");e.chart=new t.visualization.ScatterChart(e.element),j(function(){e.chart.draw(r,o)})})},this.renderTimeline=function(e){a("timeline",function(){var n={legend:"none"};e.options.colors&&(n.colors=e.options.colors);var o=i(i(s,n),e.options.library||{}),r=new t.visualization.DataTable;r.addColumn({type:"string",id:"Name"}),r.addColumn({type:"date",id:"Start"}),r.addColumn({type:"date",id:"End"}),r.addRows(e.data),e.chart=new t.visualization.Timeline(e.element),j(function(){e.chart.draw(r,o)})})}};O.push(I)}var M=function(e,t){return e="number"===t?m(e):"datetime"===t?g(e):h(e)},P=function(e,t){var n,o,r=[];for(o=0;o<e.length;o++)n=M(e[o][0],t),r.push([n,m(e[o][1])]);return"datetime"===t&&r.sort(v),r};D={LineChart:function(e,t,n){q(this,e,t,n,C)},PieChart:function(e,t,n){q(this,e,t,n,k)},ColumnChart:function(e,t,n){q(this,e,t,n,T)},BarChart:function(e,t,n){q(this,e,t,n,S)},AreaChart:function(e,t,n){q(this,e,t,n,E)},GeoChart:function(e,t,n){q(this,e,t,n,A)},ScatterChart:function(e,t,n){q(this,e,t,n,N)},Timeline:function(e,t,n){q(this,e,t,n,L)},charts:{}},e.Chartkick=D}(window);